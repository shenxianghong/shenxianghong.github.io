<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>ã€Œ Istio ã€æµé‡ç®¡ç† â€” ServiceEntry - ğŸ¾Corgi</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="ğŸ¾Corgi"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="ğŸ¾Corgi"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="Istio ä¸­æµé‡ç®¡ç†ç»„ä»¶ ServiceEntry å¯¹è±¡ä»‹ç»"><meta property="og:type" content="blog"><meta property="og:title" content="ã€Œ Istio ã€æµé‡ç®¡ç† â€” ServiceEntry"><meta property="og:url" content="http://shenxianghong.github.io/2022/08/16/2022-08-16%20Istio%20%E6%B5%81%E9%87%8F%E7%AE%A1%E7%90%86%20-%20Service%20Entry/"><meta property="og:site_name" content="ğŸ¾Corgi"><meta property="og:description" content="Istio ä¸­æµé‡ç®¡ç†ç»„ä»¶ ServiceEntry å¯¹è±¡ä»‹ç»"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://picsum.photos/0?sig=20220816"><meta property="article:published_time" content="2022-08-15T16:00:00.000Z"><meta property="article:modified_time" content="2023-05-04T00:54:28.333Z"><meta property="article:author" content="Shen Xianghong"><meta property="article:tag" content="Istio"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://picsum.photos/0?sig=20220816"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://shenxianghong.github.io/2022/08/16/2022-08-16%20Istio%20%E6%B5%81%E9%87%8F%E7%AE%A1%E7%90%86%20-%20Service%20Entry/"},"headline":"ã€Œ Istio ã€æµé‡ç®¡ç† â€” ServiceEntry","image":[],"datePublished":"2022-08-15T16:00:00.000Z","dateModified":"2023-05-04T00:54:28.333Z","author":{"@type":"Person","name":"Shen Xianghong"},"publisher":{"@type":"Organization","name":"ğŸ¾Corgi","logo":{"@type":"ImageObject","url":"http://shenxianghong.github.io/img/logo.svg"}},"description":"Istio ä¸­æµé‡ç®¡ç†ç»„ä»¶ ServiceEntry å¯¹è±¡ä»‹ç»"}</script><link rel="canonical" href="http://shenxianghong.github.io/2022/08/16/2022-08-16%20Istio%20%E6%B5%81%E9%87%8F%E7%AE%A1%E7%90%86%20-%20Service%20Entry/"><link rel="alternate" href="/atom.xml" title="ğŸ¾Corgi" type="application/atom+xml"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/xcode.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="ğŸ¾Corgi" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a></div><div class="navbar-end"><a class="navbar-item night" id="night-nav" title="Night Mode" href="javascript:;"><i class="fas fa-moon" id="night-icon"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-9-widescreen"><div class="card"><div class="card-image"><span class="image is-7by3"><img class="fill" src="https://picsum.photos/0?sig=20220816" alt="ã€Œ Istio ã€æµé‡ç®¡ç† â€” ServiceEntry"></span></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><i class="fa fa-calendar"></i>Â <time dateTime="${date_xml(page.date)}" title="${date_xml(page.date)}">2022-08-16</time></span><span class="level-item is-hidden-mobile"><i class="fa fa-calendar-check"></i>Â <time dateTime="${date_xml(page.updated)}" title="${date_xml(page.updated)}">2023-05-04</time></span><span class="level-item"><i class="far fa-folder-open"></i>Â <a class="link-muted" href="/categories/Overview/">Overview</a></span><span class="level-item"><i class="far fa-clock"></i>Â 22 minutes read (About 3366 words)</span></div></div><h1 class="title is-3 is-size-4-mobile">ã€Œ Istio ã€æµé‡ç®¡ç† â€” ServiceEntry</h1><div class="content"><div align=center><img width="120" style="border: 0px" src="https://www.vectorlogo.zone/logos/istioio/istioio-ar21.svg"></div>

<hr>
<blockquote>
<p>Based on <strong>v1.15.0</strong></p>
</blockquote>
<p>ServiceEntry å…è®¸å°†å¤–éƒ¨çš„æœåŠ¡æ·»åŠ åˆ° Istio çš„å†…éƒ¨æœåŠ¡æ³¨å†Œè¡¨ä¸­ï¼Œä»¥ä¾¿ç½‘æ ¼ä¸­çš„æœåŠ¡å¯ä»¥è®¿é—®&#x2F;è·¯ç”±åˆ°è¿™äº›æ‰‹åŠ¨æŒ‡å®šçš„æœåŠ¡ã€‚ServiceEntry æè¿°äº†æœåŠ¡çš„å±æ€§ï¼ˆDNS åç§°ã€VIPã€ç«¯å£ã€åè®®ã€ç«¯ç‚¹ï¼‰ã€‚è¿™äº›æœåŠ¡å¯èƒ½åœ¨ç½‘æ ¼å¤–éƒ¨ï¼ˆä¾‹å¦‚ï¼ŒWeb APIï¼‰æˆ–ç½‘æ ¼å†…éƒ¨æœåŠ¡ï¼Œå®ƒä»¬ä¸å±äºå¹³å°çš„æœåŠ¡æ³¨å†Œè¡¨ï¼ˆä¾‹å¦‚ï¼Œä¸€ç»„ä¸ Kubernetes ä¸­çš„æœåŠ¡é€šä¿¡çš„ VMï¼‰ã€‚æ­¤å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ workloadSelector å­—æ®µåŠ¨æ€é€‰æ‹© ServiceEntry  çš„ endpointã€‚è¿™äº› endpoint å¯ä»¥æ˜¯ä½¿ç”¨ WorkloadEntry å¯¹è±¡æˆ– Kubernetes Pod å£°æ˜çš„ VM å·¥ä½œè´Ÿè½½ã€‚åœ¨å•ä¸ªæœåŠ¡ä¸‹åŒæ—¶é€‰æ‹© Pod å’Œ VM çš„èƒ½åŠ›å…è®¸å°†æœåŠ¡ä» VM è¿ç§»åˆ° Kubernetesï¼Œè€Œæ— éœ€æ›´æ”¹ä¸æœåŠ¡å…³è”çš„ç°æœ‰ DNS åç§°ã€‚</p>
<p>ä»¥ä¸‹ç¤ºä¾‹ä¸­å£°æ˜äº†ä¸€äº›ç”±å†…éƒ¨åº”ç”¨ç¨‹åºé€šè¿‡ HTTPS è®¿é—®çš„å¤–éƒ¨ APIã€‚ Sidecar æ£€æŸ¥ ClientHello æ¶ˆæ¯ä¸­çš„ SNI å€¼ä»¥è·¯ç”±åˆ°é€‚å½“çš„å¤–éƒ¨æœåŠ¡ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.istio.io/v1beta1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ServiceEntry</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">external-svc-https</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">hosts:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">api.dropboxapi.com</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">www.googleapis.com</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">api.facebook.com</span></span><br><span class="line">  <span class="attr">location:</span> <span class="string">MESH_EXTERNAL</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">number:</span> <span class="number">443</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">https</span></span><br><span class="line">    <span class="attr">protocol:</span> <span class="string">TLS</span></span><br><span class="line">  <span class="attr">resolution:</span> <span class="string">DNS</span></span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸‹é…ç½®å°†ä¸€ç»„è¿è¡Œåœ¨éæ‰˜ç®¡ VM ä¸Šçš„ MongoDB å®ä¾‹æ·»åŠ åˆ° Istio çš„æ³¨å†Œè¡¨ä¸­ï¼Œä»¥ä¾¿å¯ä»¥å°†è¿™äº›æœåŠ¡è§†ä¸ºç½‘æ ¼ä¸­çš„æœåŠ¡ã€‚å…³è”çš„ DestinationRule ç”¨äºå¯åŠ¨ä¸æ•°æ®åº“å®ä¾‹çš„ mTLS è¿æ¥ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.istio.io/v1beta1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ServiceEntry</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">external-svc-mongocluster</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">hosts:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">mymongodb.somedomain</span> <span class="comment"># not used</span></span><br><span class="line">  <span class="attr">addresses:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">192.192</span><span class="number">.192</span><span class="number">.192</span><span class="string">/24</span> <span class="comment"># VIPs</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">number:</span> <span class="number">27018</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">mongodb</span></span><br><span class="line">    <span class="attr">protocol:</span> <span class="string">MONGO</span></span><br><span class="line">  <span class="attr">location:</span> <span class="string">MESH_INTERNAL</span></span><br><span class="line">  <span class="attr">resolution:</span> <span class="string">STATIC</span></span><br><span class="line">  <span class="attr">endpoints:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">address:</span> <span class="number">2.2</span><span class="number">.2</span><span class="number">.2</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">address:</span> <span class="number">3.3</span><span class="number">.3</span><span class="number">.3</span></span><br></pre></td></tr></table></figure>

<p>ç›¸å…³è”çš„ DestinationRuleã€‚</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.istio.io/v1beta1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">DestinationRule</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">mtls-mongocluster</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">host:</span> <span class="string">mymongodb.somedomain</span></span><br><span class="line">  <span class="attr">trafficPolicy:</span></span><br><span class="line">    <span class="attr">tls:</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">MUTUAL</span></span><br><span class="line">      <span class="attr">clientCertificate:</span> <span class="string">/etc/certs/myclientcert.pem</span></span><br><span class="line">      <span class="attr">privateKey:</span> <span class="string">/etc/certs/client_private_key.pem</span></span><br><span class="line">      <span class="attr">caCertificates:</span> <span class="string">/etc/certs/rootcacerts.pem</span></span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸‹ç¤ºä¾‹ç»“åˆä½¿ç”¨ VirtualService ä¸­çš„ ServiceEntry å’Œ TLS è·¯ç”±ï¼Œæ ¹æ® SNI å€¼å°†æµé‡å¼•å¯¼è‡³å†…éƒ¨å‡ºå£é˜²ç«å¢™ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.istio.io/v1beta1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ServiceEntry</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">external-svc-redirect</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">hosts:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">wikipedia.org</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;*.wikipedia.org&quot;</span></span><br><span class="line">  <span class="attr">location:</span> <span class="string">MESH_EXTERNAL</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">number:</span> <span class="number">443</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">https</span></span><br><span class="line">    <span class="attr">protocol:</span> <span class="string">TLS</span></span><br><span class="line">  <span class="attr">resolution:</span> <span class="string">NONE</span></span><br></pre></td></tr></table></figure>

<p>åŸºäº SNI å€¼è·¯ç”±çš„ç›¸å…³è”çš„ VirtualServiceã€‚</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.istio.io/v1beta1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">VirtualService</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">tls-routing</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">hosts:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">wikipedia.org</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;*.wikipedia.org&quot;</span></span><br><span class="line">  <span class="attr">tls:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">match:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">sniHosts:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">wikipedia.org</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;*.wikipedia.org&quot;</span></span><br><span class="line">    <span class="attr">route:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">destination:</span></span><br><span class="line">        <span class="attr">host:</span> <span class="string">internal-egress-firewall.ns1.svc.cluster.local</span></span><br></pre></td></tr></table></figure>

<p>å…·æœ‰ TLS åŒ¹é…çš„ Virtual Service ç”¨äºè¦†ç›–é»˜è®¤çš„ SNI åŒ¹é…ã€‚åœ¨æ²¡æœ‰ Virtual Service çš„æƒ…å†µä¸‹ï¼Œæµé‡å°†è¢«è½¬å‘åˆ° wikipedia ã€‚</p>
<p>ä»¥ä¸‹ç¤ºä¾‹ä¸­æ¼”ç¤ºäº†ä½¿ç”¨ä¸“ç”¨å‡ºå£ç½‘å…³ï¼Œé€šè¿‡è¯¥ç½‘å…³è½¬å‘æ‰€æœ‰å¤–éƒ¨æœåŠ¡æµé‡ã€‚ â€œexportToâ€ å­—æ®µå…è®¸æ§åˆ¶æœåŠ¡å£°æ˜å¯¹ç½‘æ ¼ä¸­å…¶ä»–å‘½åç©ºé—´çš„å¯è§æ€§ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒæœåŠ¡ä¼šå¯¼å‡ºåˆ°æ‰€æœ‰å‘½åç©ºé—´ã€‚ä¸‹é¢çš„ä¾‹å­é™åˆ¶äº†å½“å‰å‘½åç©ºé—´çš„å¯è§æ€§ï¼Œç”¨ â€œ.â€ è¡¨ç¤ºï¼Œæ‰€ä»¥å®ƒä¸èƒ½è¢«å…¶ä»–å‘½åç©ºé—´ä½¿ç”¨ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.istio.io/v1beta1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ServiceEntry</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">external-svc-httpbin</span></span><br><span class="line">  <span class="attr">namespace :</span> <span class="string">egress</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">hosts:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">example.com</span></span><br><span class="line">  <span class="attr">exportTo:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;.&quot;</span></span><br><span class="line">  <span class="attr">location:</span> <span class="string">MESH_EXTERNAL</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">number:</span> <span class="number">80</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">http</span></span><br><span class="line">    <span class="attr">protocol:</span> <span class="string">HTTP</span></span><br><span class="line">  <span class="attr">resolution:</span> <span class="string">DNS</span></span><br></pre></td></tr></table></figure>

<p>å®šä¹‰ä¸€ä¸ª Gateway æ¥å¤„ç†æ‰€æœ‰å‡ºå£æµé‡ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.istio.io/v1beta1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Gateway</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"> <span class="attr">name:</span> <span class="string">istio-egressgateway</span></span><br><span class="line"> <span class="attr">namespace:</span> <span class="string">istio-system</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"> <span class="attr">selector:</span></span><br><span class="line">   <span class="attr">istio:</span> <span class="string">egressgateway</span></span><br><span class="line"> <span class="attr">servers:</span></span><br><span class="line"> <span class="bullet">-</span> <span class="attr">port:</span></span><br><span class="line">     <span class="attr">number:</span> <span class="number">80</span></span><br><span class="line">     <span class="attr">name:</span> <span class="string">http</span></span><br><span class="line">     <span class="attr">protocol:</span> <span class="string">HTTP</span></span><br><span class="line">   <span class="attr">hosts:</span></span><br><span class="line">   <span class="bullet">-</span> <span class="string">&quot;*&quot;</span></span><br></pre></td></tr></table></figure>

<p>å…³è”çš„ VirtualService ä» Sidecar è·¯ç”±åˆ°ç½‘å…³æœåŠ¡ï¼ˆistio-egressgateway.istio-system.svc.cluster.localï¼‰ï¼ŒåŒæ ·çš„ä» Gateway è·¯ç”±åˆ°å¤–éƒ¨æœåŠ¡ã€‚VirtualService è¢«å¯¼å‡ºåˆ°æ‰€æœ‰å‘½åç©ºé—´ï¼Œä½¿å®ƒä»¬èƒ½å¤Ÿé€šè¿‡ Gateway å°†æµé‡è·¯ç”±åˆ°å¤–éƒ¨æœåŠ¡ã€‚åƒè¿™æ ·å¼ºåˆ¶æµé‡é€šè¿‡æ‰˜ç®¡ä¸­é—´ä»£ç†æ˜¯ä¸€ç§å¸¸è§åšæ³•ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.istio.io/v1beta1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">VirtualService</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">gateway-routing</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">egress</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">hosts:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">example.com</span></span><br><span class="line">  <span class="attr">exportTo:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;*&quot;</span></span><br><span class="line">  <span class="attr">gateways:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">mesh</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">istio-egressgateway</span></span><br><span class="line">  <span class="attr">http:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">match:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line">      <span class="attr">gateways:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">mesh</span></span><br><span class="line">    <span class="attr">route:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">destination:</span></span><br><span class="line">        <span class="attr">host:</span> <span class="string">istio-egressgateway.istio-system.svc.cluster.local</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">match:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line">      <span class="attr">gateways:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">istio-egressgateway</span></span><br><span class="line">    <span class="attr">route:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">destination:</span></span><br><span class="line">        <span class="attr">host:</span> <span class="string">example.com</span></span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸‹ç¤ºä¾‹æ¼”ç¤ºäº†åœ¨ä¸»æœºä¸­ä¸ºå¤–éƒ¨æœåŠ¡ä½¿ç”¨é€šé…ç¬¦ã€‚å¦‚æœå¿…é¡»å°†è¿æ¥è·¯ç”±åˆ°åº”ç”¨ç¨‹åºè¯·æ±‚çš„ IP åœ°å€ï¼ˆå³åº”ç”¨ç¨‹åºè§£æ DNS å¹¶å°è¯•è¿æ¥åˆ°ç‰¹å®š IPï¼‰ï¼Œåˆ™å¿…é¡»å°† resolution è®¾ç½®ä¸º NONEã€‚</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.istio.io/v1beta1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ServiceEntry</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">external-svc-wildcard-example</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">hosts:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;*.bar.com&quot;</span></span><br><span class="line">  <span class="attr">location:</span> <span class="string">MESH_EXTERNAL</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">number:</span> <span class="number">80</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">http</span></span><br><span class="line">    <span class="attr">protocol:</span> <span class="string">HTTP</span></span><br><span class="line">  <span class="attr">resolution:</span> <span class="string">NONE</span></span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸‹ç¤ºä¾‹æ¼”ç¤ºäº†å¯é€šè¿‡å®¢æˆ·ç«¯ä¸»æœºä¸Šçš„ Unix åŸŸå¥—æ¥å­—è·å¾—çš„æœåŠ¡ã€‚resolution å¿…é¡»è®¾ç½®ä¸º STATIC æ‰èƒ½ä½¿ç”¨ Unix åœ°å€ endpointã€‚</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.istio.io/v1beta1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ServiceEntry</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">unix-domain-socket-example</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">hosts:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;example.unix.local&quot;</span></span><br><span class="line">  <span class="attr">location:</span> <span class="string">MESH_EXTERNAL</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">number:</span> <span class="number">80</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">http</span></span><br><span class="line">    <span class="attr">protocol:</span> <span class="string">HTTP</span></span><br><span class="line">  <span class="attr">resolution:</span> <span class="string">STATIC</span></span><br><span class="line">  <span class="attr">endpoints:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">address:</span> <span class="string">unix:///var/run/example/socket</span></span><br></pre></td></tr></table></figure>

<p>å¯¹äºåŸºäº HTTP çš„æœåŠ¡ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªç”±å¤šä¸ª DNS å¯å¯»å€ endpoint æ”¯æŒçš„ VirtualServiceã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥ä½¿ç”¨ HTTP_PROXY ç¯å¢ƒå˜é‡é€æ˜åœ°å°† VirtualService çš„ API è°ƒç”¨é‡æ–°è·¯ç”±åˆ°é€‰å®šçš„åç«¯ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä»¥ä¸‹é…ç½®åˆ›å»ºäº†ä¸€ä¸ªåä¸º foo.bar.com çš„ä¸å­˜åœ¨çš„å¤–éƒ¨æœåŠ¡ï¼Œåç«¯ï¼šus.foo.bar.com:8080ã€uk.foo.bar.com:9080 å’Œ in.foo.bar.com:7080ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.istio.io/v1beta1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ServiceEntry</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">external-svc-dns</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">hosts:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">foo.bar.com</span></span><br><span class="line">  <span class="attr">location:</span> <span class="string">MESH_EXTERNAL</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">number:</span> <span class="number">80</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">http</span></span><br><span class="line">    <span class="attr">protocol:</span> <span class="string">HTTP</span></span><br><span class="line">  <span class="attr">resolution:</span> <span class="string">DNS</span></span><br><span class="line">  <span class="attr">endpoints:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">address:</span> <span class="string">us.foo.bar.com</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="attr">http:</span> <span class="number">8080</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">address:</span> <span class="string">uk.foo.bar.com</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="attr">http:</span> <span class="number">9080</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">address:</span> <span class="string">in.foo.bar.com</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="attr">http:</span> <span class="number">7080</span></span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ HTTP_PROXY&#x3D;<a target="_blank" rel="noopener" href="http://localhost/%EF%BC%8C%E4%BB%8E%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E5%88%B0">http://localhost/ï¼Œä»åº”ç”¨ç¨‹åºåˆ°</a> <a target="_blank" rel="noopener" href="http://foo.bar.com/">http://foo.bar.com</a> çš„è°ƒç”¨å°†åœ¨ä¸Šé¢æŒ‡å®šçš„ä¸‰ä¸ªåŸŸä¹‹é—´è¿›è¡Œè´Ÿè½½å¹³è¡¡ã€‚æ¢å¥è¯è¯´ï¼Œå¯¹ <a target="_blank" rel="noopener" href="http://foo.bar.com/baz">http://foo.bar.com/baz</a> çš„è°ƒç”¨å°†è¢«è½¬æ¢ä¸º <a target="_blank" rel="noopener" href="http://uk.foo.bar.com/baz%E3%80%82">http://uk.foo.bar.com/bazã€‚</a></p>
<p>ä»¥ä¸‹ç¤ºä¾‹è¯´æ˜äº†åŒ…å« subjectAltNames çš„ ServiceEntry çš„ç”¨æ³•ï¼Œè¯¥åç§°çš„æ ¼å¼ç¬¦åˆ SPIFFE æ ‡å‡†ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.istio.io/v1beta1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ServiceEntry</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">httpbin</span></span><br><span class="line">  <span class="attr">namespace :</span> <span class="string">httpbin-ns</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">hosts:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">example.com</span></span><br><span class="line">  <span class="attr">location:</span> <span class="string">MESH_INTERNAL</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">number:</span> <span class="number">80</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">http</span></span><br><span class="line">    <span class="attr">protocol:</span> <span class="string">HTTP</span></span><br><span class="line">  <span class="attr">resolution:</span> <span class="string">STATIC</span></span><br><span class="line">  <span class="attr">endpoints:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">address:</span> <span class="number">2.2</span><span class="number">.2</span><span class="number">.2</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">address:</span> <span class="number">3.3</span><span class="number">.3</span><span class="number">.3</span></span><br><span class="line">  <span class="attr">subjectAltNames:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;spiffe://cluster.local/ns/httpbin-ns/sa/httpbin-service-account&quot;</span></span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸‹ç¤ºä¾‹æ¼”ç¤ºäº†ä½¿ç”¨ ServiceEntry å’Œ workloadSelector æ¥å¤„ç†æœåŠ¡ details.bookinfo.com ä» VM åˆ° Kubernetes çš„è¿ç§»ã€‚è¯¥æœåŠ¡æœ‰ä¸¤ä¸ªåŸºäº VM çš„å®ä¾‹å’Œ Sidecarï¼Œä»¥åŠä¸€ç»„ç”±æ ‡å‡†éƒ¨ç½²å¯¹è±¡ç®¡ç†çš„ Kubernetes Podã€‚ç½‘æ ¼ä¸­æ­¤æœåŠ¡çš„ä½¿ç”¨è€…å°†åœ¨ VM å’Œ Kubernetes ä¹‹é—´è‡ªåŠ¨è¿›è¡Œè´Ÿè½½å¹³è¡¡ã€‚ç”¨äº details.bookinfo.com æœåŠ¡çš„ VMã€‚æ­¤ VM å·²ä½¿ç”¨ details-legacy Service Account å®‰è£…å’Œå¼•å¯¼ Sidecarã€‚ Sidecar åœ¨ç«¯å£ 80 ä¸Šæ¥æ”¶ HTTP æµé‡ï¼ˆåŒ…è£…åœ¨ istio åŒå‘ TLS ä¸­ï¼‰å¹¶å°†å…¶è½¬å‘åˆ°åŒä¸€ç«¯å£ä¸Š localhost ä¸Šçš„åº”ç”¨ç¨‹åºã€‚</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.istio.io/v1beta1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">WorkloadEntry</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">details-vm-1</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">serviceAccount:</span> <span class="string">details</span></span><br><span class="line">  <span class="attr">address:</span> <span class="number">2.2</span><span class="number">.2</span><span class="number">.2</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">details</span></span><br><span class="line">    <span class="attr">instance-id:</span> <span class="string">vm1</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.istio.io/v1beta1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">WorkloadEntry</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">details-vm-2</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">serviceAccount:</span> <span class="string">details</span></span><br><span class="line">  <span class="attr">address:</span> <span class="number">3.3</span><span class="number">.3</span><span class="number">.3</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">details</span></span><br><span class="line">    <span class="attr">instance-id:</span> <span class="string">vm2</span></span><br></pre></td></tr></table></figure>

<p>å‡è®¾è¿˜æœ‰ä¸€ä¸ª Deployment å¸¦æœ‰ Pod æ ‡ç­¾ app: details ä½¿ç”¨ç›¸åŒçš„ ServiceAccountï¼ˆå³ detailsï¼‰ï¼Œä»¥ä¸‹ ServiceEntry å£°æ˜äº†ä¸€ä¸ªè·¨ VM å’Œ Kubernetes çš„æœåŠ¡ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.istio.io/v1beta1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ServiceEntry</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">details-svc</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">hosts:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">details.bookinfo.com</span></span><br><span class="line">  <span class="attr">location:</span> <span class="string">MESH_INTERNAL</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">number:</span> <span class="number">80</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">http</span></span><br><span class="line">    <span class="attr">protocol:</span> <span class="string">HTTP</span></span><br><span class="line">  <span class="attr">resolution:</span> <span class="string">STATIC</span></span><br><span class="line">  <span class="attr">workloadSelector:</span></span><br><span class="line">    <span class="attr">labels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">details</span></span><br></pre></td></tr></table></figure>

<h1 id="ServiceEntry"><a href="#ServiceEntry" class="headerlink" title="ServiceEntry"></a>ServiceEntry</h1><table>
<thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>hosts</td>
<td>ä¸ ServiceEntry å…³è”çš„ä¸»æœºã€‚å¯ä»¥æ˜¯å¸¦æœ‰é€šé…ç¬¦å‰ç¼€çš„ DNS åç§°ã€‚<br />- hosts å­—æ®µç”¨äºåœ¨ VirtualServices å’Œ DestinationRules ä¸­é€‰æ‹©åŒ¹é…çš„ä¸»æœº<br />- å¯¹äº HTTP æµé‡ï¼ŒHTTP Host&#x2F;Authority æ ‡å¤´å°†ä¸ hosts å­—æ®µåŒ¹é…<br />- å¯¹äºåŒ…å«æœåŠ¡å™¨åç§°æŒ‡ç¤ºï¼ˆSNIï¼‰ çš„ HTTPs æˆ– TLS æµé‡ï¼ŒSNI å€¼å°†ä¸ hosts å­—æ®µåŒ¹é…<br /><br />NOTEï¼š<br />- å½“è§£æè®¾ç½®ä¸º DNS ç±»å‹ä¸”æœªæŒ‡å®š endpoint æ—¶ï¼Œä¸»æœºå­—æ®µå°†ç”¨ä½œå°†æµé‡è·¯ç”±åˆ°çš„ endpoint çš„ DNS åç§°<br />- å¦‚æœä¸»æœºåä¸å¦ä¸€ä¸ªæœåŠ¡æ³¨å†Œä¸­å¿ƒçš„æœåŠ¡åç§°åŒ¹é…ï¼Œä¾‹å¦‚ Kubernetesï¼Œå®ƒä¹Ÿæä¾›è‡ªå·±çš„ä¸€ç»„ endpointï¼Œåˆ™ ServiceEntry å°†è¢«è§†ä¸ºç°æœ‰ Kubernetes æœåŠ¡çš„è£…é¥°å™¨ã€‚å¦‚æœé€‚ç”¨ï¼ŒService Entry ä¸­çš„å±æ€§å°†æ·»åŠ åˆ° Kubernetes æœåŠ¡ä¸­ã€‚ç›®å‰ï¼Œistiod åªä¼šè€ƒè™‘ä»¥ä¸‹é™„åŠ å±æ€§ï¼š<br />- subjectAltNamesï¼šé™¤äº†éªŒè¯ä¸æœåŠ¡çš„ pod å…³è”çš„æœåŠ¡å¸æˆ·çš„ SAN ä¹‹å¤–ï¼Œè¿˜å°†éªŒè¯æ­¤å¤„æŒ‡å®šçš„ SAN</td>
</tr>
<tr>
<td>addresses</td>
<td>ä¸æœåŠ¡å…³è”çš„è™šæ‹Ÿ IP åœ°å€ã€‚å¯èƒ½æ˜¯ CIDR å‰ç¼€ã€‚å¯¹äº HTTP æµé‡ï¼Œç”Ÿæˆçš„è·¯ç”±é…ç½®å°†åŒ…æ‹¬åœ°å€å’Œä¸»æœºå­—æ®µå€¼çš„ http è·¯ç”±åŸŸï¼Œå¹¶ä¸”å°†æ ¹æ® HTTP Host&#x2F;Authority æ ‡å¤´è¯†åˆ«ç›®æ ‡ã€‚å¦‚æœæŒ‡å®šäº†ä¸€ä¸ªæˆ–å¤šä¸ª IP åœ°å€ï¼Œå¦‚æœç›®æ ‡ IP ä¸åœ°å€å­—æ®µä¸­æŒ‡å®šçš„ IP&#x2F;CIDR åŒ¹é…ï¼Œåˆ™ä¼ å…¥æµé‡å°†è¢«æ ‡è¯†ä¸ºå±äºæ­¤æœåŠ¡ã€‚å¦‚æœåœ°å€å­—æ®µä¸ºç©ºï¼Œåˆ™å°†ä»…æ ¹æ®ç›®æ ‡ç«¯å£è¯†åˆ«æµé‡ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒæœåŠ¡è¢«è®¿é—®çš„ç«¯å£ä¸èƒ½è¢«ç½‘æ ¼ä¸­çš„ä»»ä½•å…¶ä»–æœåŠ¡å…±äº«ã€‚æ¢å¥è¯è¯´ï¼ŒSidecar å°†å……å½“ç®€å•çš„ TCP ä»£ç†ï¼Œå°†æŒ‡å®šç«¯å£ä¸Šçš„ä¼ å…¥æµé‡è½¬å‘åˆ°æŒ‡å®šçš„ç›®æ ‡ endpoint IP&#x2F;ä¸»æœºã€‚æ­¤å­—æ®µä¸æ”¯æŒ Unix åŸŸå¥—æ¥å­—åœ°å€</td>
</tr>
<tr>
<td>ports</td>
<td>ä¸å¤–éƒ¨æœåŠ¡å…³è”çš„ç«¯å£ã€‚å¦‚æœ endpoint æ˜¯ Unix åŸŸå¥—æ¥å­—åœ°å€ï¼Œåˆ™å¿…é¡»åªæœ‰ä¸€ä¸ªç«¯å£</td>
</tr>
<tr>
<td><a href="#ServiceEntry.Location">location</a></td>
<td>æŒ‡å®šæ˜¯å¦åº”å°†æœåŠ¡è§†ä¸ºç½‘æ ¼å¤–éƒ¨æˆ–ç½‘æ ¼çš„ä¸€éƒ¨åˆ†</td>
</tr>
<tr>
<td><a href="#ServiceEntry.Resolution">resolution</a></td>
<td>ä¸»æœºçš„æœåŠ¡å‘ç°æ¨¡å¼ã€‚ä¸ºæ²¡æœ‰é™„å¸¦ IP åœ°å€çš„ TCP ç«¯å£è®¾ç½®è§£ææ¨¡å¼ä¸º NONE æ—¶éœ€è¦æ³¨æ„ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°†å…è®¸åˆ°æ‰€è¿°ç«¯å£ä¸Šçš„ä»»ä½• IP çš„æµé‡ï¼ˆå³ 0.0.0.0:&lt;port&gt;ï¼‰</td>
</tr>
<tr>
<td>endpoints</td>
<td>ä¸æœåŠ¡å…³è”çš„ä¸€ä¸ªæˆ–å¤šä¸ª endpointã€‚åªèƒ½æŒ‡å®š endpoints æˆ– workloadSelector ä¹‹ä¸€</td>
</tr>
<tr>
<td>workloadSelector</td>
<td>ä»…é€‚ç”¨äº MESH_INTERNAL æœåŠ¡ã€‚åªèƒ½æŒ‡å®š endpoint æˆ–å·¥ä½œè´Ÿè½½é€‰æ‹©å™¨ä¹‹ä¸€ã€‚æ ¹æ®æ ‡ç­¾é€‰æ‹©ä¸€ä¸ªæˆ–å¤šä¸ª Kubernetes Pod æˆ– VM å·¥ä½œè´Ÿè½½ï¼ˆä½¿ç”¨ WorkloadEntry æŒ‡å®šï¼‰ã€‚è¡¨ç¤º VM çš„ WorkloadEntry å¯¹è±¡åº”ä¸ ServiceEntry å®šä¹‰åœ¨ç›¸åŒçš„å‘½åç©ºé—´ä¸­</td>
</tr>
<tr>
<td>exportTo</td>
<td>æ­¤æœåŠ¡å¯¼å‡ºåˆ°çš„å‘½åç©ºé—´åˆ—è¡¨ã€‚å¯¼å‡ºæœåŠ¡å…è®¸å®ƒè¢«å…¶ä»–å‘½åç©ºé—´ä¸­å®šä¹‰çš„ Sidecarã€Gateway å’Œ VirtualService ä½¿ç”¨ã€‚æ­¤åŠŸèƒ½ä¸ºæœåŠ¡æ‰€æœ‰è€…å’Œç½‘æ ¼ç®¡ç†å‘˜æä¾›äº†ä¸€ç§æœºåˆ¶æ¥æ§åˆ¶è·¨å‘½åç©ºé—´è¾¹ç•Œçš„æœåŠ¡çš„å¯è§æ€§ã€‚<br />å¦‚æœæœªæŒ‡å®šå‘½åç©ºé—´ï¼Œåˆ™é»˜è®¤å°†æœåŠ¡å¯¼å‡ºåˆ°æ‰€æœ‰å‘½åç©ºé—´ã€‚<br /> â€.â€ ä¿ç•™è¯­ä¹‰è¡¨ç¤ºå¯¼å‡ºåˆ°å£°æ˜æœåŠ¡çš„åŒä¸€å‘½åç©ºé—´ã€‚ç±»ä¼¼åœ°ï¼Œâ€œ*â€ ä¿ç•™è¯­ä¹‰å®šä¹‰å¯¼å‡ºåˆ°æ‰€æœ‰å‘½åç©ºé—´ã€‚<br />å¯¹äº Kubernetes Serviceï¼Œå¯ä»¥é€šè¿‡å°†æ³¨è§£ networking.istio.io&#x2F;exportTo è®¾ç½®ä¸ºä»¥é€—å·åˆ†éš”çš„å‘½åç©ºé—´åç§°åˆ—è¡¨æ¥å®ç°ç­‰æ•ˆæ•ˆæœ</td>
</tr>
<tr>
<td>subjectAltNames</td>
<td>å¦‚æœæŒ‡å®šï¼Œä»£ç†å°†éªŒè¯æœåŠ¡å™¨è¯ä¹¦çš„ subject alternate name æ˜¯å¦ä¸æŒ‡å®šå€¼ä¹‹ä¸€åŒ¹é…ã€‚<br />æ³¨æ„ï¼šå°† workloadEntry  ä¸ workloadSelector ä¸€èµ·ä½¿ç”¨æ—¶ï¼ŒworkloadEntry ä¸­æŒ‡å®šçš„ ServiceAccount ä¹Ÿå°†ç”¨äºæ´¾ç”Ÿåº”éªŒè¯çš„å…¶ä»– subject alternate name</td>
</tr>
</tbody></table>
<h1 id="ServiceEntry-Location"><a href="#ServiceEntry-Location" class="headerlink" title="ServiceEntry.Location"></a><a name="ServiceEntry.Location">ServiceEntry.Location</a></h1><p>location æŒ‡å®šæœåŠ¡æ˜¯ Istio ç½‘æ ¼çš„ä¸€éƒ¨åˆ†è¿˜æ˜¯ç½‘æ ¼ä¹‹å¤–ã€‚location å†³å®šäº†å‡ ä¸ªç‰¹æ€§çš„è¡Œä¸ºï¼Œä¾‹å¦‚æœåŠ¡åˆ°æœåŠ¡çš„ mTLS èº«ä»½éªŒè¯ã€ç­–ç•¥æ‰§è¡Œç­‰ã€‚å½“ä¸ç½‘æ ¼å¤–çš„æœåŠ¡é€šä¿¡æ—¶ï¼ŒIstio çš„ mTLS èº«ä»½éªŒè¯è¢«ç¦ç”¨ï¼Œå¹¶ä¸”ç­–ç•¥æ‰§è¡Œåœ¨å®¢æˆ·ç«¯æ‰§è¡Œï¼Œè€Œä¸æ˜¯åœ¨æœåŠ¡ç«¯ã€‚</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>MESH_EXTERNAL</td>
<td>è¡¨ç¤ºæœåŠ¡åœ¨ç½‘æ ¼å¤–éƒ¨ã€‚é€šå¸¸ç”¨äºæŒ‡ç¤ºé€šè¿‡ API ä½¿ç”¨çš„å¤–éƒ¨æœåŠ¡</td>
</tr>
<tr>
<td>MESH_INTERNAL</td>
<td>è¡¨ç¤ºæœåŠ¡æ˜¯ç½‘æ ¼çš„ä¸€éƒ¨åˆ†ã€‚é€šå¸¸ç”¨äºæŒ‡ç¤ºä½œä¸ºæ‰©å±•æœåŠ¡ç½‘æ ¼ä»¥åŒ…æ‹¬éæ‰˜ç®¡åŸºç¡€è®¾æ–½çš„ä¸€éƒ¨åˆ†è€Œæ˜¾å¼æ·»åŠ çš„æœåŠ¡ï¼ˆä¾‹å¦‚ï¼Œæ·»åŠ åˆ°åŸºäº Kubernetes çš„æœåŠ¡ç½‘æ ¼çš„è™šæ‹Ÿæœºï¼‰</td>
</tr>
</tbody></table>
<h1 id="ServiceEntry-Resolution"><a href="#ServiceEntry-Resolution" class="headerlink" title="ServiceEntry.Resolution"></a><a name="ServiceEntry.Resolution">ServiceEntry.Resolution</a></h1><p>resolution å†³å®šä»£ç†å°†å¦‚ä½•è§£æä¸æœåŠ¡å…³è”çš„ç½‘ç»œ endpoint çš„ IP åœ°å€ï¼Œä»¥ä¾¿å®ƒå¯ä»¥è·¯ç”±åˆ°å…¶ä¸­ä¸€ä¸ªã€‚æ­¤å¤„æŒ‡å®šçš„è§£ææ¨¡å¼å¯¹åº”ç”¨ç¨‹åºå¦‚ä½•è§£æä¸æœåŠ¡å…³è”çš„ IP åœ°å€æ²¡æœ‰å½±å“ã€‚åº”ç”¨ç¨‹åºå¯èƒ½ä»éœ€è¦ä½¿ç”¨ DNS å°†æœåŠ¡è§£æä¸º IPï¼Œä»¥ä¾¿ä»£ç†å¯ä»¥æ•è·å‡ºç«™æµé‡ã€‚æˆ–è€…ï¼Œå¯¹äº HTTP æœåŠ¡ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥ç›´æ¥ä¸ä»£ç†é€šä¿¡ï¼ˆä¾‹å¦‚ï¼Œé€šè¿‡è®¾ç½® HTTP_PROXYï¼‰æ¥ä¸è¿™äº›æœåŠ¡é€šä¿¡ã€‚</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>NONE</td>
<td>å‡è®¾ä¼ å…¥çš„è¿æ¥å·²ç»è¢«è§£æï¼ˆåˆ°ç‰¹å®šçš„ç›®æ ‡ IP åœ°å€ï¼‰ã€‚æ­¤ç±»è¿æ¥é€šå¸¸ä½¿ç”¨ IP è¡¨ REDIRECT&#x2F;eBPF ç­‰æœºåˆ¶é€šè¿‡ä»£ç†è¿›è¡Œè·¯ç”±ã€‚åœ¨æ‰§è¡Œä»»ä½•ä¸è·¯ç”±ç›¸å…³çš„è½¬æ¢åï¼Œä»£ç†ä¼šå°†è¿æ¥è½¬å‘åˆ°è¿æ¥ç»‘å®šçš„ IP åœ°å€</td>
</tr>
<tr>
<td>STATIC</td>
<td>ä½¿ç”¨ endpoint ä¸­æŒ‡å®šçš„é™æ€ IP åœ°å€ï¼ˆè§ä¸‹æ–‡ï¼‰ä½œä¸ºä¸æœåŠ¡å…³è”çš„æ”¯æŒå®ä¾‹</td>
</tr>
<tr>
<td>DNS</td>
<td>å°è¯•é€šè¿‡å¼‚æ­¥æŸ¥è¯¢ç¯å¢ƒ DNS æ¥è§£æ IP åœ°å€ã€‚å¦‚æœæœªæŒ‡å®š endpointï¼Œåˆ™ä»£ç†å°†è§£æä¸»æœºå­—æ®µä¸­æŒ‡å®šçš„ DNS åœ°å€ï¼ˆå¦‚æœæœªä½¿ç”¨é€šé…ç¬¦ï¼‰ã€‚å¦‚æœæŒ‡å®šäº† endpointï¼Œåˆ™å°†è§£æ endpoint ä¸­æŒ‡å®šçš„ DNS åœ°å€ä»¥ç¡®å®šç›®æ ‡ IP åœ°å€ã€‚ DNS è§£æä¸èƒ½ä¸ Unix åŸŸå¥—æ¥å­— endpoint ä¸€èµ·ä½¿ç”¨</td>
</tr>
<tr>
<td>DNS_ROUND_ROBIN</td>
<td>å°è¯•é€šè¿‡å¼‚æ­¥æŸ¥è¯¢ç¯å¢ƒ DNS æ¥è§£æ IP åœ°å€ã€‚ä¸ DNS ä¸åŒï¼ŒDNS_ROUND_ROBIN ä»…åœ¨éœ€è¦å¯åŠ¨æ–°è¿æ¥æ—¶ä½¿ç”¨è¿”å›çš„ç¬¬ä¸€ä¸ª IP åœ°å€ï¼Œè€Œä¸ä¾èµ–äº DNS è§£æçš„å®Œæ•´ç»“æœï¼Œå³ä½¿ DNS è®°å½•é¢‘ç¹æ›´æ”¹ï¼Œä¸ä¸»æœºå»ºç«‹çš„è¿æ¥ä¹Ÿå°†è¢«ä¿ç•™ï¼Œä»è€Œæ¶ˆé™¤äº†è€—å°½è¿æ¥æ± å’Œè¿æ¥å¾ªç¯ã€‚è¿™æœ€é€‚åˆå¿…é¡»é€šè¿‡ DNS è®¿é—®çš„å¤§å‹ Web è§„æ¨¡æœåŠ¡ã€‚å¦‚æœä¸ä½¿ç”¨é€šé…ç¬¦ï¼Œä»£ç†å°†è§£æä¸»æœºå­—æ®µä¸­æŒ‡å®šçš„ DNS åœ°å€ã€‚ DNS è§£æä¸èƒ½ä¸ Unix åŸŸå¥—æ¥å­— endpoint ä¸€èµ·ä½¿ç”¨</td>
</tr>
</tbody></table>
</div><div class="article-licensing box"><div class="licensing-title"><p>ã€Œ Istio ã€æµé‡ç®¡ç† â€” ServiceEntry</p><p><a href="http://shenxianghong.github.io/2022/08/16/2022-08-16 Istio æµé‡ç®¡ç† - Service Entry/">http://shenxianghong.github.io/2022/08/16/2022-08-16 Istio æµé‡ç®¡ç† - Service Entry/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>Shen Xianghong</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2022-08-16</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2023-05-04</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><hr style="height:1px;margin:1rem 0"><div class="level is-mobile is-flex"><div class="article-tags is-size-7 is-uppercase"><i class="fas fa-tags has-text-grey"></i>Â <a class="link-muted" rel="tag" href="/tags/Istio/">Istio </a></div></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2022/08/23/2022-08-23%20Istio%20%E6%B5%81%E9%87%8F%E7%AE%A1%E7%90%86%20-%20Workload%20Entry/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">ã€Œ Istio ã€æµé‡ç®¡ç† â€” WorkloadEntry</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2022/08/09/2022-08-09%20Istio%20%E6%B5%81%E9%87%8F%E7%AE%A1%E7%90%86%20-%20Destination%20Rule/"><span class="level-item">ã€Œ Istio ã€æµé‡ç®¡ç† â€” DestinationRule</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="https://avatars.githubusercontent.com/u/35031258?v=4" alt="ğŸ¾Corgi"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">ğŸ¾Corgi</p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">50</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">7</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">9</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/shenxianghong" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Youtube" href="https://youtube.com"><i class="fab fa-youtube"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Bilibili" href="https://bilibili.com"><i class="fab fa-bilibili"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Reddit" href="https://reddit.com"><i class="fab fa-reddit"></i></a></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://google.com" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Google</span></span><span class="level-right"><span class="level-item tag">google.com</span></span></a></li><li><a class="level is-mobile" href="https://freegpt.one" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">ChatGPT</span></span><span class="level-right"><span class="level-item tag">freegpt.one</span></span></a></li></ul></div></div></div><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><li><a class="level is-mobile" href="#ServiceEntry"><span class="level-left"><span class="level-item">1</span><span class="level-item">ServiceEntry</span></span></a></li><li><a class="level is-mobile" href="#ServiceEntry-Location"><span class="level-left"><span class="level-item">2</span><span class="level-item">ServiceEntry.Location</span></span></a></li><li><a class="level is-mobile" href="#ServiceEntry-Resolution"><span class="level-left"><span class="level-item">3</span><span class="level-item">ServiceEntry.Resolution</span></span></a></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Code-Walkthrough/"><span class="level-start"><span class="level-item">Code Walkthrough</span></span><span class="level-end"><span class="level-item tag">17</span></span></a></li><li><a class="level is-mobile" href="/categories/Getting-Started/"><span class="level-start"><span class="level-item">Getting Started</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile" href="/categories/Meetup/"><span class="level-start"><span class="level-item">Meetup</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Overview/"><span class="level-start"><span class="level-item">Overview</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/"><span class="level-start"><span class="level-item">Programming</span></span><span class="level-end"><span class="level-item tag">7</span></span></a><ul><li><a class="level is-mobile" href="/categories/Programming/Elegant-Coding/"><span class="level-start"><span class="level-item">Elegant Coding</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/Quick-Start/"><span class="level-start"><span class="level-item">Quick Start</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></li></ul></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="ğŸ¾Corgi" height="28"></a><p class="is-size-7"><span>&copy; 2023 Shen Xianghong</span>Â Â Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>Â &amp;Â <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">Visited by <span id="busuanzi_value_site_uv">0</span> users</span></p><p class="is-size-7"><br/>And did you get what you wanted from this life, even so?</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><script src="/js/night.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">Ã—</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>