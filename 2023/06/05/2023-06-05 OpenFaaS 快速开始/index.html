<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>ã€Œ OpenFaaS ã€å¿«é€Ÿå¼€å§‹ - ğŸ¾Corgi</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="ğŸ¾Corgi"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="ğŸ¾Corgi"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="OpenFaaS åœ¨ä¸åŒæœåŠ¡é©±åŠ¨ä¸‹ï¼ˆOpenFaaS CEã€OpenFaaS Pro å’Œ faasdï¼‰çš„ç®€å•ä½¿ç”¨ç¤ºä¾‹"><meta property="og:type" content="blog"><meta property="og:title" content="ã€Œ OpenFaaS ã€å¿«é€Ÿå¼€å§‹"><meta property="og:url" content="http://shenxianghong.github.io/2023/06/05/2023-06-05%20OpenFaaS%20%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B/"><meta property="og:site_name" content="ğŸ¾Corgi"><meta property="og:description" content="OpenFaaS åœ¨ä¸åŒæœåŠ¡é©±åŠ¨ä¸‹ï¼ˆOpenFaaS CEã€OpenFaaS Pro å’Œ faasdï¼‰çš„ç®€å•ä½¿ç”¨ç¤ºä¾‹"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://picsum.photos/0?sig=20230605"><meta property="article:published_time" content="2023-06-04T16:00:00.000Z"><meta property="article:modified_time" content="2023-06-12T08:59:08.000Z"><meta property="article:author" content="Shen Xianghong"><meta property="article:tag" content="OpenFaaS"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://picsum.photos/0?sig=20230605"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://shenxianghong.github.io/2023/06/05/2023-06-05%20OpenFaaS%20%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B/"},"headline":"ã€Œ OpenFaaS ã€å¿«é€Ÿå¼€å§‹","image":[],"datePublished":"2023-06-04T16:00:00.000Z","dateModified":"2023-06-12T08:59:08.000Z","author":{"@type":"Person","name":"Shen Xianghong"},"publisher":{"@type":"Organization","name":"ğŸ¾Corgi","logo":{"@type":"ImageObject","url":"http://shenxianghong.github.io/img/logo.svg"}},"description":"OpenFaaS åœ¨ä¸åŒæœåŠ¡é©±åŠ¨ä¸‹ï¼ˆOpenFaaS CEã€OpenFaaS Pro å’Œ faasdï¼‰çš„ç®€å•ä½¿ç”¨ç¤ºä¾‹"}</script><link rel="canonical" href="http://shenxianghong.github.io/2023/06/05/2023-06-05%20OpenFaaS%20%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B/"><link rel="alternate" href="/atom.xml" title="ğŸ¾Corgi" type="application/atom+xml"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/xcode.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="ğŸ¾Corgi" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a></div><div class="navbar-end"><a class="navbar-item night" id="night-nav" title="Night Mode" href="javascript:;"><i class="fas fa-moon" id="night-icon"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-9-widescreen"><div class="card"><div class="card-image"><span class="image is-7by3"><img class="fill" src="https://picsum.photos/0?sig=20230605" alt="ã€Œ OpenFaaS ã€å¿«é€Ÿå¼€å§‹"></span></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><i class="fa fa-calendar"></i>Â <time dateTime="${date_xml(page.date)}" title="${date_xml(page.date)}">2023-06-05</time></span><span class="level-item"><i class="fa fa-calendar-check"></i>Â <time dateTime="${date_xml(page.updated)}" title="${date_xml(page.updated)}">2023-06-12</time></span><span class="level-item"><i class="far fa-folder-open"></i>Â <a class="link-muted" href="/categories/Serverless/">Serverless</a></span><span class="level-item"><i class="far fa-clock"></i>Â 34 minutes read (About 5067 words)</span></div></div><h1 class="title is-3 is-size-4-mobile">ã€Œ OpenFaaS ã€å¿«é€Ÿå¼€å§‹</h1><div class="content"><div align=center><img width="200" style="border: 0px" src="/gallery/openfaas/openfaas-logo.png"></div>

<hr>
<blockquote>
<p>based on <strong>0.26.3</strong></p>
</blockquote>
<p>OpenFaaS æ”¯æŒéƒ¨ç½²è‡³ä»¥ä¸‹ç¯å¢ƒä¸­ï¼š</p>
<ul>
<li>Kubernetesã€K3sã€OpenShift ç­‰å®¹å™¨ç¼–æ’ç¯å¢ƒ</li>
<li>è¿è¡Œ faasd æœåŠ¡çš„å•ç‚¹æœåŠ¡å™¨ç¯å¢ƒ</li>
</ul>
<p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œä¸ Kubernetes ç­‰å®¹å™¨ç¼–æ’ç¯å¢ƒé›†æˆèƒ½å¤Ÿæä¾›æ›´å¥½çš„å¯æ‰©å±•èƒ½åŠ›ã€‚</p>
<h1 id="OpenFaaS-CE"><a href="#OpenFaaS-CE" class="headerlink" title="OpenFaaS CE"></a>OpenFaaS CE</h1><p><em>OpenFaaS  Community Edition ç‰ˆæœ¬é¢å‘å†…éƒ¨ä½¿ç”¨ã€å¼€å‘å’Œæ¦‚å¿µéªŒè¯ã€‚</em></p>
<p>OpenFaaS CE å®‰è£…æ–¹æ³•ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://arkade.dev/">arkade</a><br><em>arkade æœ¬è´¨ä¸Šä¸ºä¸€ç«™å¼éƒ¨ç½²å·¥å…·ï¼Œæ”¯æŒè®¸å¤šæœåŠ¡éƒ¨ç½²ï¼Œå…¶ä¸­å¯¹äº OpenFaaS æœåŠ¡æ”¯æŒå®Œå–„ã€‚å†…éƒ¨é›†æˆäº†äºŒè¿›åˆ¶çš„ä¸‹è½½ä¸ Helm chart çš„å®‰è£…ï¼Œarkade å°è£…äº† helm çš„å‚æ•°èµ‹å€¼ä¸éƒ¨ç½²ï¼Œä¹Ÿå°±æ˜¯åœ¨ helm ä¸­é€šè¿‡ â€“set è®¾ç½®çš„å˜é‡ï¼Œarkade é€šè¿‡ â€“flags çš„æ–¹å¼å¤„ç†äº†</em></li>
<li>Helm chartã€Flux æˆ–è€… ArgoCD</li>
<li>é™æ€ YAML é…ç½®æ–‡ä»¶</li>
</ul>
<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><h3 id="faas-cli"><a href="#faas-cli" class="headerlink" title="faas-cli"></a>faas-cli</h3><p><strong>ä½¿ç”¨ arkade å®‰è£…</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®‰è£… arkade</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">curl -sSL https://get.arkade.dev | sudo -E sh</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®‰è£… faas-cli</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">arkade get faas-cli</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo <span class="built_in">mv</span> /root/.arkade/bin/faas-cli /usr/local/bin/</span></span><br></pre></td></tr></table></figure>

<p><strong>ä½¿ç”¨ bash å®‰è£…</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">curl -sSL https://cli.openfaas.com | sh</span></span><br><span class="line">New version of faas-cli installed to /usr/local/bin</span><br><span class="line">Creating alias &#x27;faas&#x27; for &#x27;faas-cli&#x27;.</span><br></pre></td></tr></table></figure>

<h3 id="OpenFaaS"><a href="#OpenFaaS" class="headerlink" title="OpenFaaS"></a>OpenFaaS</h3><p><strong>ä½¿ç”¨ arkade å®‰è£…</strong></p>
<p><em>arkade å°è£…äº† helm çš„å‚æ•°èµ‹å€¼ä¸éƒ¨ç½²ï¼Œä¹Ÿå°±æ˜¯åœ¨ helm ä¸­é€šè¿‡ â€“set è®¾ç½®çš„å˜é‡ï¼Œarkade é€šè¿‡ â€“flags çš„æ–¹å¼å¤„ç†äº†</em></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®‰è£… arkade</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">curl -sSL https://get.arkade.dev | sudo -E sh</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é»˜è®¤å®‰è£…</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">arkade install openfaas</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®‰è£…å¯é€‰å‚æ•°</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">arkade install openfaas --<span class="built_in">help</span></span></span><br></pre></td></tr></table></figure>

<p><strong>ä½¿ç”¨ helm å®‰è£…</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®‰è£… helm</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">curl -sSLf https://raw.githubusercontent.com/helm/helm/master/scripts/get-helm-3 | bash</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ¨èåˆ›å»ºä¸¤ä¸ª namespaceï¼šopenfaas å’Œ openfaas-fnï¼Œå‰è€…ç”¨äºéƒ¨ç½² OpenFaaS æœåŠ¡ç»„ä»¶ï¼Œåè€…ç”¨äºéƒ¨ç½²å‡½æ•°</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">arkade éƒ¨ç½²ä¸­ï¼Œé»˜è®¤åˆ›å»ºäº†è¿™ä¸¤ä¸ª namespace</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">kubectl apply -f https://raw.githubusercontent.com/openfaas/faas-netes/master/namespaces.yml</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">helm repo add openfaas https://openfaas.github.io/faas-netes/</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">helm repo update &amp;&amp; helm upgrade openfaas --install openfaas/openfaas --namespace openfaas</span></span><br></pre></td></tr></table></figure>

<p><strong>å®‰è£…ç»“æœ</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">kubectl get deploy -n openfaas</span></span><br><span class="line">NAME           READY   UP-TO-DATE   AVAILABLE   AGE</span><br><span class="line">alertmanager   1/1     1            1           71s</span><br><span class="line">gateway        1/1     1            1           71s</span><br><span class="line">nats           1/1     1            1           71s</span><br><span class="line">prometheus     1/1     1            1           71s</span><br><span class="line">queue-worker   1/1     1            1           71s</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">kubectl get svc -n openfaas</span></span><br><span class="line">NAME               TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)          AGE</span><br><span class="line">alertmanager       ClusterIP   10.96.76.14     &lt;none&gt;        9093/TCP         74s</span><br><span class="line">gateway            ClusterIP   10.96.4.162     &lt;none&gt;        8080/TCP         74s</span><br><span class="line">gateway-external   NodePort    10.96.10.134    &lt;none&gt;        8080:31112/TCP   74s</span><br><span class="line">nats               ClusterIP   10.96.196.157   &lt;none&gt;        4222/TCP         74s</span><br><span class="line">prometheus         ClusterIP   10.96.166.131   &lt;none&gt;        9090/TCP         74s</span><br></pre></td></tr></table></figure>

<h2 id="ç½‘å…³è®¤è¯"><a href="#ç½‘å…³è®¤è¯" class="headerlink" title="ç½‘å…³è®¤è¯"></a>ç½‘å…³è®¤è¯</h2><p>è¿™é‡Œé‡‡ç”¨ NodePort çš„å½¢å¼éƒ¨ç½² OpenFaaS CE æœåŠ¡ã€‚å…¶ä¸­ï¼Œgateway-external ä¸ºå¯¹å¤–æš´éœ²çš„ç½‘å…³æœåŠ¡ï¼Œgateway ä¸ºå¯¹å†…æš´éœ²çš„ç½‘å…³æœåŠ¡ï¼Œå…¶åç«¯å‡ä¸º gateway Podã€‚æ— è®ºå“ªç§æ–¹å¼å‡é‡‡ç”¨ HTTP è®¤è¯ç™»å½•æ–¹å¼ï¼Œè®¤è¯ç”¨æˆ·åå’Œå¯†ç åœ¨ Secret ä¸­ä¿å­˜ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">USER=$(kubectl get secret -n openfaas basic-auth -o jsonpath=<span class="string">&quot;&#123;.data.basic-auth-user&#125;&quot;</span> | <span class="built_in">base64</span> --decode; <span class="built_in">echo</span>)</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">PASSWORD=$(kubectl get secret -n openfaas basic-auth -o jsonpath=<span class="string">&quot;&#123;.data.basic-auth-password&#125;&quot;</span> | <span class="built_in">base64</span> --decode; <span class="built_in">echo</span>)</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="string">&quot;OpenFaaS user: <span class="variable">$USER</span>&quot;</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="string">&quot;OpenFaaS password: <span class="variable">$PASSWORD</span>&quot;</span></span></span><br></pre></td></tr></table></figure>

<p><strong>gateway</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">kubectl rollout status -n openfaas deploy/gateway</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">kubectl port-forward -n openfaas svc/gateway 8080:8080 &amp;</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> -n <span class="variable">$PASSWORD</span> | faas-cli login --username admin --password-stdin</span></span><br><span class="line">Calling the OpenFaaS server to validate the credentials...</span><br><span class="line">Handling connection for 8080</span><br><span class="line">credentials saved for admin http://127.0.0.1:8080</span><br></pre></td></tr></table></figure>

<p>é»˜è®¤ faas-cli æ“ä½œçš„ OpenFaaS å®ä¾‹ä¸º <code>http://127.0.0.1:8080</code>ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ â€“gateway è¿›ä¸€æ­¥æŒ‡å®šã€‚</p>
<p><strong>gateway-external</strong></p>
<p>HTTP è®¤è¯ç™»å½• gateway-external æš´éœ²çš„æœåŠ¡ï¼Œå³ <code>http://178.104.162.69:31112/ui/</code>ã€‚è®¤è¯åï¼Œå³å¯è¿›å…¥ OpenFaaS UIï¼š</p>
<div align=center><img width="800" style="border: 0px" src="/gallery/openfaas/home.png"></div>

<h2 id="æ¨¡æ¿å•†åº—"><a href="#æ¨¡æ¿å•†åº—" class="headerlink" title="æ¨¡æ¿å•†åº—"></a>æ¨¡æ¿å•†åº—</h2><p>ç¤¾åŒºæä¾›çš„æ¨¡æ¿å•†åº—ä¸º <a target="_blank" rel="noopener" href="https://github.com/openfaas/store/blob/master/templates.json%EF%BC%8C%E5%85%B6%E4%B8%AD%E6%9D%A5%E6%BA%90%E8%87%AA">https://github.com/openfaas/store/blob/master/templates.jsonï¼Œå…¶ä¸­æ¥æºè‡ª</a> OpenFaaS å®˜æ–¹ç¤¾åŒºä¸å‘¨è¾¹ç¤¾åŒºã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	&#123;</span><br><span class="line">        &quot;template&quot;: &quot;go&quot;,</span><br><span class="line">        &quot;platform&quot;: &quot;x86_64&quot;,</span><br><span class="line">        &quot;language&quot;: &quot;Go&quot;,</span><br><span class="line">        &quot;source&quot;: &quot;openfaas&quot;,</span><br><span class="line">        &quot;description&quot;: &quot;Legacy Golang template&quot;,</span><br><span class="line">        &quot;repo&quot;: &quot;https://github.com/openfaas/templates&quot;,</span><br><span class="line">        &quot;official&quot;: &quot;true&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;template&quot;: &quot;rust&quot;,</span><br><span class="line">        &quot;platform&quot;: &quot;x86_64&quot;,</span><br><span class="line">        &quot;language&quot;: &quot;Rust&quot;,</span><br><span class="line">        &quot;source&quot;: &quot;openfaas-incubator&quot;,</span><br><span class="line">        &quot;description&quot;: &quot;Community Rust template&quot;,</span><br><span class="line">        &quot;repo&quot;: &quot;https://github.com/openfaas-incubator/openfaas-rust-template&quot;,</span><br><span class="line">        &quot;official&quot;: &quot;false&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹é»˜è®¤æ”¯æŒçš„æ¨¡æ¿å•†åº—ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">faas-cli template store list</span></span><br><span class="line">NAME                     RECOMMENDED DESCRIPTION        SOURCE</span><br><span class="line">bash-streaming           [x]         openfaas-incubator Bash Streaming template</span><br><span class="line">dockerfile               [x]         openfaas           Classic Dockerfile template</span><br><span class="line">golang-middleware        [x]         openfaas           HTTP middleware interface in Go</span><br><span class="line">java11-vert-x            [x]         openfaas           Java 11 Vert.x template</span><br><span class="line">node18                   [x]         openfaas           HTTP-based Node 18 template</span><br><span class="line">php8                     [x]         openfaas           Classic PHP 8 template</span><br><span class="line">python3-http             [x]         openfaas           Python 3 with Flask and HTTP</span><br><span class="line">python3-http-debian      [x]         openfaas           Python 3 with Flask and HTTP based on Debian</span><br><span class="line">ruby-http                [x]         openfaas           Ruby 2.4 HTTP template</span><br><span class="line">cobol                    [ ]         devries            COBOL Template</span><br><span class="line">crystal                  [ ]         tpei               Crystal template</span><br><span class="line">crystal-http             [ ]         koffeinfrei        Crystal HTTP template</span><br><span class="line">csharp-httprequest       [ ]         distantcam         C# HTTP template</span><br><span class="line">csharp-kestrel           [ ]         burtonr            C# Kestrel HTTP template</span><br><span class="line">lua53                    [ ]         affix              Lua 5.3 Template</span><br><span class="line">perl-alpine              [ ]         tmiklas            Perl language template based on Alpine image</span><br><span class="line">python3-dlrs             [ ]         intel              Deep Learning Reference Stack v0.4 for ML workloads</span><br><span class="line">quarkus-native           [ ]         pmlopes            Quarkus.io native image template</span><br><span class="line">rust                     [ ]         openfaas-incubator Community Rust template</span><br><span class="line">rust-http                [ ]         openfaas-incubator Community Rust template with HTTP bindings</span><br><span class="line">swift                    [ ]         affix              Swift 4.2 Template</span><br><span class="line">vala                     [ ]         affix              Vala Template</span><br><span class="line">vala-http                [ ]         affix              Non-Forking Vala Template</span><br><span class="line">vertx-native             [ ]         pmlopes            Eclipse Vert.x native image template</span><br><span class="line">csharp                   [ ]         openfaas           Classic C# template</span><br><span class="line">go                       [ ]         openfaas           Legacy Golang template</span><br><span class="line">golang-http              [ ]         openfaas           Request/response style HTTP template</span><br><span class="line">java11                   [ ]         openfaas           Java 11 template</span><br><span class="line">node                     [ ]         openfaas           Legacy Node 12 template</span><br><span class="line">node12                   [ ]         openfaas           HTTP-based Node 12 template</span><br><span class="line">node14                   [ ]         openfaas           HTTP-based Node 14 template</span><br><span class="line">node16                   [ ]         openfaas           HTTP-based Node 16 template</span><br><span class="line">node17                   [ ]         openfaas           HTTP-based Node 17 template</span><br><span class="line">php7                     [ ]         openfaas           Classic PHP 7 template</span><br><span class="line">powershell-http-template [ ]         openfaas-incubator Powershell Core HTTP Ubuntu:16.04 template</span><br><span class="line">powershell-template      [ ]         openfaas-incubator Powershell Core Ubuntu:16.04 template</span><br><span class="line">puppeteer-nodelts        [ ]         alexellis          A puppeteer template for headless Chrome</span><br><span class="line">python                   [ ]         openfaas           Classic Python 2.7 template</span><br><span class="line">python27-flask           [ ]         openfaas           Python 2.7 Flask template</span><br><span class="line">python3                  [ ]         openfaas           Classic Python 3 template</span><br><span class="line">python3-debian           [ ]         openfaas           Python 3 Debian template</span><br><span class="line">python3-flask            [ ]         openfaas           Python 3 Flask template</span><br><span class="line">python3-flask-debian     [ ]         openfaas           Python 3 Flask template based on Debian</span><br><span class="line">ruby                     [ ]         openfaas           Classic Ruby 2.5 template</span><br></pre></td></tr></table></figure>

<p>è·å–æ‰˜ç®¡åœ¨æ¨¡æ¿å•†åº—ä¸­çš„ OpenFaaS å®˜æ–¹ç»å…¸æ¨¡æ¿ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">faas-cli template pull</span></span><br><span class="line">Fetch templates from repository: https://github.com/openfaas/templates.git at </span><br><span class="line">2023/06/05 17:15:07 Attempting to expand templates from https://github.com/openfaas/templates.git</span><br><span class="line">2023/06/05 17:15:09 Fetched 18 template(s) : [csharp dockerfile go java11 java11-vert-x node node12 node12-debian node14 node16 node17 node18 php7 php8 python python3 python3-debian ruby] from https://github.com/openfaas/templates.git</span><br></pre></td></tr></table></figure>

<p>è·å–æ‰˜ç®¡åœ¨æ¨¡æ¿å•†åº—ä¸­çš„æŒ‡å®šæ¨¡æ¿ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">faas-cli template store pull rust</span></span><br><span class="line">Fetch templates from repository: https://github.com/openfaas-incubator/openfaas-rust-template at </span><br><span class="line">2023/06/05 17:41:58 Attempting to expand templates from https://github.com/openfaas-incubator/openfaas-rust-template</span><br><span class="line">2023/06/05 17:42:02 Fetched 1 template(s) : [rust] from https://github.com/openfaas-incubator/openfaas-rust-template</span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå¯ä»¥é€šè¿‡ â€“url å‚æ•°ï¼Œè·å–æŒ‡å®šæ¥æºçš„æ¨¡æ¿ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">faas-cli template store pull --url=https://raw.githubusercontent.com/openfaas/store/master/templates.json</span></span><br></pre></td></tr></table></figure>

<p>è·å–åˆ°çš„æ¨¡æ¿æ–‡ä»¶ä¿å­˜åœ¨å½“å‰çš„ template ç›®å½•ä¸­ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">ls</span> template/</span></span><br><span class="line">csharp  dockerfile  go  java11  java11-vert-x  node  node12  node12-debian  node14  node16  node17  node18  php7  php8  python  python3  python3-debian  ruby</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">tree template/golang-middleware/</span></span><br><span class="line">template/golang-middleware/</span><br><span class="line">â”œâ”€â”€ Dockerfile		# å‡½æ•°æœ€ç»ˆä¼šæ„å»ºæˆé•œåƒ</span><br><span class="line">â”œâ”€â”€ function		# ä¸šåŠ¡ä»£ç ï¼Œæ¯”å¦‚å®ç° HTTP endpoint å¤„ç†è¯·æ±‚</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ go.mod</span><br><span class="line">â”‚Â Â  â””â”€â”€ handler.go</span><br><span class="line">â”œâ”€â”€ go.mod</span><br><span class="line">â”œâ”€â”€ go.work</span><br><span class="line">â”œâ”€â”€ main.go			# å‡½æ•°å…¥å£ï¼Œç”¨äºå¯åŠ¨ HTTP æœåŠ¡å™¨ï¼Œæ³¨å†Œ endpoint</span><br><span class="line">â””â”€â”€ template.yml	# æ¨¡æ¿è¯´æ˜</span><br><span class="line"></span><br><span class="line">1 directory, 7 files</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">faas-cli new --list</span></span><br><span class="line">Languages available as templates:</span><br><span class="line">- csharp</span><br><span class="line">- dockerfile</span><br><span class="line">- go</span><br><span class="line">- java11</span><br><span class="line">- java11-vert-x</span><br><span class="line">- node</span><br><span class="line">- node12</span><br><span class="line">- node12-debian</span><br><span class="line">- node14</span><br><span class="line">- node16</span><br><span class="line">- node17</span><br><span class="line">- node18</span><br><span class="line">- php7</span><br><span class="line">- php8</span><br><span class="line">- python</span><br><span class="line">- python3</span><br><span class="line">- python3-debian</span><br><span class="line">- ruby</span><br></pre></td></tr></table></figure>

<h2 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World"></a>Hello World</h2><h3 id="åˆ›å»ºå‡½æ•°"><a href="#åˆ›å»ºå‡½æ•°" class="headerlink" title="åˆ›å»ºå‡½æ•°"></a>åˆ›å»ºå‡½æ•°</h3><p><em>è¿™é‡Œä»¥ Golang çš„ golang-middleware å‡½æ•°æ¨¡æ¿ä¸ºä¾‹ï¼Œè¯¥å‡½æ•°ä¸ºç®€å•çš„ HTTP è¯·æ±‚å“åº”ã€‚</em></p>
<table>
<thead>
<tr>
<th>å¯é€‰æ¨¡æ¿</th>
<th>æ‰˜ç®¡å•†åº—</th>
<th>watchdog</th>
<th>Go ç‰ˆæœ¬</th>
<th>åŸºç¡€ OS</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>go</td>
<td><a target="_blank" rel="noopener" href="https://github.com/openfaas/templates">https://github.com/openfaas/templates</a></td>
<td>classic</td>
<td>1.18</td>
<td>Alpine Linux</td>
<td>Legacy Golang template</td>
</tr>
<tr>
<td>golang-middleware</td>
<td><a target="_blank" rel="noopener" href="https://github.com/openfaas/golang-http-template">https://github.com/openfaas/golang-http-template</a></td>
<td>of-watchdog</td>
<td>1.19</td>
<td>Alpine Linux</td>
<td>HTTP middleware interface in Go</td>
</tr>
<tr>
<td>golang-http</td>
<td><a target="_blank" rel="noopener" href="https://github.com/openfaas/golang-http-template">https://github.com/openfaas/golang-http-template</a></td>
<td>of-watchdog</td>
<td>1.19</td>
<td>Alpine Linux</td>
<td>Request&#x2F;response style HTTP template</td>
</tr>
</tbody></table>
<p>ä½¿ç”¨ golang-middleware æ¨¡æ¿åˆ›å»ºåä¸º go-fn çš„å‡½æ•°ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">faas-cli new go-fn --lang golang-middleware</span></span><br><span class="line">Folder: go-fn created.</span><br><span class="line">  ___                   _____           ____</span><br><span class="line"> / _ \ _ __   ___ _ __ |  ___|_ _  __ _/ ___|</span><br><span class="line">| | | | &#x27;_ \ / _ \ &#x27;_ \| |_ / _` |/ _` \___ \</span><br><span class="line">| |_| | |_) |  __/ | | |  _| (_| | (_| |___) |</span><br><span class="line"> \___/| .__/ \___|_| |_|_|  \__,_|\__,_|____/</span><br><span class="line">      |_|</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Function created in folder: go-fn</span><br><span class="line">Stack file written: go-fn.yml</span><br><span class="line"></span><br><span class="line">Notes:</span><br><span class="line">You have created a new function which uses Go 1.19 and Alpine</span><br><span class="line">Linux as its base image.</span><br><span class="line"></span><br><span class="line">To disable the go module, for private vendor code, please use</span><br><span class="line">&quot;--build-arg GO111MODULE=off&quot; with faas-cli build or configure this</span><br><span class="line">via your stack.yml file.</span><br><span class="line"></span><br><span class="line">See more: https://docs.openfaas.com/cli/templates/</span><br><span class="line"></span><br><span class="line">For the template&#x27;s repo and more examples:</span><br><span class="line">https://github.com/openfaas/golang-http-template</span><br></pre></td></tr></table></figure>

<p>å‡½æ•°æ¨¡æ¿åˆ›å»ºåï¼Œä¼šåœ¨å½“å‰ç›®å½•ç”Ÿæˆ go-fn ç›®å½•ï¼Œå…¶å†…å®¹æºè‡ªäº template&#x2F;golang-middleware&#x2F;function ä»¥åŠ go-fn.yml æ–‡ä»¶ï¼Œç”¨äºæè¿°å‡½æ•°æ„å»ºçš„å…·ä½“è§„æ ¼ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="number">1.0</span></span><br><span class="line"><span class="attr">provider:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">openfaas</span></span><br><span class="line">  <span class="attr">gateway:</span> <span class="string">http://127.0.0.1:8080</span></span><br><span class="line"><span class="attr">functions:</span></span><br><span class="line">  <span class="attr">go-fn:</span></span><br><span class="line">    <span class="attr">lang:</span> <span class="string">golang-middleware</span></span><br><span class="line">    <span class="attr">handler:</span> <span class="string">./go-fn</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">harbor.archeros.cn/dev/ake/openfaas-fn:dev</span></span><br></pre></td></tr></table></figure>

<h3 id="æ„å»ºå‡½æ•°é•œåƒ"><a href="#æ„å»ºå‡½æ•°é•œåƒ" class="headerlink" title="æ„å»ºå‡½æ•°é•œåƒ"></a>æ„å»ºå‡½æ•°é•œåƒ</h3><p><code>faas-cli build</code> æ„å»ºå‡½æ•°æ—¶ï¼Œé»˜è®¤è¯»å–å½“å‰ç›®å½•ä¸‹çš„ stack.yml æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ -f æŒ‡å®šã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">faas-cli build -f go-fn.yml</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker images</span></span><br><span class="line">harbor.archeros.cn/dev/ake/openfaas-fn     dev     891e42d0a44c     23 minutes ago     21MB</span><br></pre></td></tr></table></figure>

<p>æ„å»ºæ—¶ä½¿ç”¨çš„ Dockerfile ä½äº build&#x2F;go-fn&#x2F;Dockerfileï¼ˆæºè‡ª template&#x2F;golang-middleware&#x2F;Dockerfileï¼‰ã€‚</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> --platform=$&#123;TARGETPLATFORM:-linux/amd64&#125; ghcr.io/openfaas/of-watchdog:<span class="number">0.9</span>.<span class="number">11</span> as watchdog</span><br><span class="line"><span class="keyword">FROM</span> --platform=$&#123;BUILDPLATFORM:-linux/amd64&#125; golang:<span class="number">1.19</span>-alpine as build</span><br><span class="line"></span><br><span class="line"><span class="keyword">ARG</span> TARGETPLATFORM</span><br><span class="line"><span class="keyword">ARG</span> BUILDPLATFORM</span><br><span class="line"><span class="keyword">ARG</span> TARGETOS</span><br><span class="line"><span class="keyword">ARG</span> TARGETARCH</span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apk --no-cache add git</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> --from=watchdog /fwatchdog /usr/bin/fwatchdog</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">chmod</span> +x /usr/bin/fwatchdog</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">mkdir</span> -p /go/src/handler</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /go/src/handler</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> . .</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ARG</span> GO111MODULE=<span class="string">&quot;on&quot;</span></span><br><span class="line"><span class="keyword">ARG</span> GOPROXY=<span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">ARG</span> GOFLAGS=<span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">ARG</span> CGO_ENABLED=<span class="number">0</span></span><br><span class="line"><span class="keyword">ENV</span> CGO_ENABLED=$&#123;CGO_ENABLED&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Run a gofmt and exclude all vendored code.</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">test</span> -z <span class="string">&quot;<span class="subst">$(gofmt -l $(find . -type f -name &#x27;*.go&#x27; -not -path <span class="string">&quot;./vendor/*&quot;</span> -not -path <span class="string">&quot;./function/vendor/*&quot;</span>)</span>)&quot;</span> || &#123; <span class="built_in">echo</span> <span class="string">&quot;Run \&quot;gofmt -s -w\&quot; on your Golang code&quot;</span>; <span class="built_in">exit</span> 1; &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /go/src/handler/function</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">mkdir</span> -p /go/src/handler/function/static</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> GOOS=<span class="variable">$&#123;TARGETOS&#125;</span> GOARCH=<span class="variable">$&#123;TARGETARCH&#125;</span> go <span class="built_in">test</span> ./... -cover</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /go/src/handler</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> GOOS=<span class="variable">$&#123;TARGETOS&#125;</span> GOARCH=<span class="variable">$&#123;TARGETARCH&#125;</span> \</span></span><br><span class="line"><span class="language-bash">    go build --ldflags <span class="string">&quot;-s -w&quot;</span> -o handler .</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">FROM</span> --platform=$&#123;TARGETPLATFORM:-linux/amd64&#125; alpine:<span class="number">3.17</span>.<span class="number">2</span> as ship</span><br><span class="line"></span><br><span class="line"><span class="comment"># Add non root user and certs</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apk --no-cache add ca-certificates \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; addgroup -S app &amp;&amp; adduser -S -g app app</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Split instructions so that buildkit can run &amp; cache</span></span><br><span class="line"><span class="comment"># the previous command ahead of time.</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">mkdir</span> -p /home/app \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; <span class="built_in">chown</span> app /home/app</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /home/app</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> --from=build --<span class="built_in">chown</span>=app /go/src/handler/handler           .</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> --from=build --<span class="built_in">chown</span>=app /usr/bin/fwatchdog                .</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> --from=build --<span class="built_in">chown</span>=app /go/src/handler/function/static   static</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">USER</span> app</span><br><span class="line"></span><br><span class="line"><span class="keyword">ENV</span> fprocess=<span class="string">&quot;./handler&quot;</span></span><br><span class="line"><span class="keyword">ENV</span> mode=<span class="string">&quot;http&quot;</span></span><br><span class="line"><span class="keyword">ENV</span> upstream_url=<span class="string">&quot;http://127.0.0.1:8082&quot;</span></span><br><span class="line"><span class="keyword">ENV</span> prefix_logs=<span class="string">&quot;false&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> [<span class="string">&quot;./fwatchdog&quot;</span>]</span></span><br></pre></td></tr></table></figure>

<p>æ­¤å¤–ï¼Œæ„å»ºå‚æ•°å¯ä»¥é€šè¿‡ stack.yml æ–‡ä»¶ä¸­çš„ build_args é€‰é¡¹æŒ‡å®šï¼Œæ•ˆæœç­‰ä»·äº <code>faas-cli build --build-arg key1=value1,key2=value2</code>ã€‚æœ€ç»ˆï¼Œbuild_args æŒ‡å®šçš„å‚æ•°ä¼šé€šè¿‡ docker build â€“build-arg é€ä¼ ç»™ Dockerfile ä¸­çš„ ARGã€‚</p>
<p>ä¾‹å¦‚ï¼ŒæŒ‡å®šä½¿ç”¨æœ¬åœ° vendor æ„å»º Golang åº”ç”¨</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">functions:</span></span><br><span class="line">  <span class="attr">with_go_modules:</span></span><br><span class="line">    <span class="attr">handler:</span> <span class="string">./with_go_modules</span></span><br><span class="line">    <span class="attr">lang:</span> <span class="string">go</span></span><br><span class="line">    <span class="attr">build_args:</span></span><br><span class="line">      <span class="attr">GO111MODULE:</span> <span class="string">off</span></span><br><span class="line">      <span class="attr">GOFLAGS:</span> <span class="string">&quot;-mod=vendor&quot;</span></span><br></pre></td></tr></table></figure>

<p>é»˜è®¤å‡½æ•°åº”ç”¨é•œåƒæ‹‰å–ç­–ç•¥ä¸º Alwaysï¼Œéœ€è¦å°†é•œåƒæ¨é€è‡³è¿œç¨‹ä»“åº“ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">faas-cli push -f go-fn.yml</span></span><br></pre></td></tr></table></figure>

<h3 id="å‘å¸ƒå‡½æ•°"><a href="#å‘å¸ƒå‡½æ•°" class="headerlink" title="å‘å¸ƒå‡½æ•°"></a>å‘å¸ƒå‡½æ•°</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">faas-cli deploy -f go-fn.yml</span> </span><br><span class="line">Deploying: go-fn.</span><br><span class="line">Handling connection for 8080</span><br><span class="line"></span><br><span class="line">Deployed. 202 Accepted.</span><br><span class="line">URL: http://127.0.0.1:8080/function/go-fn</span><br></pre></td></tr></table></figure>

<p>å‡½æ•°å‘å¸ƒåï¼Œå¯¹åº”ç€ä¸€ä¸ª Deploy åˆ›å»ºã€‚OpenFaaS CE ç‰ˆæœ¬ä¸­ï¼Œå‰¯æœ¬æ•°æœ€å°ä¸º 1ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">kubectl get pod -n openfaas-fn</span></span><br><span class="line">NAME                     READY   STATUS    RESTARTS   AGE</span><br><span class="line">go-fn-757f844cc5-v5tvn   1/1     Running   0          8s</span><br></pre></td></tr></table></figure>

<p>Pod çš„å…³é”®å‚æ•°ä¸ºï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">env:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">fprocess</span></span><br><span class="line">      <span class="attr">value:</span> <span class="string">./handler</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">harbor.archeros.cn/dev/ake/openfaas-fn:dev</span></span><br><span class="line">    <span class="attr">imagePullPolicy:</span> <span class="string">Always</span></span><br><span class="line">    <span class="attr">livenessProbe:</span></span><br><span class="line">      <span class="attr">failureThreshold:</span> <span class="number">3</span></span><br><span class="line">      <span class="attr">httpGet:</span></span><br><span class="line">        <span class="attr">path:</span> <span class="string">/_/health</span></span><br><span class="line">        <span class="attr">port:</span> <span class="number">8080</span></span><br><span class="line">        <span class="attr">scheme:</span> <span class="string">HTTP</span></span><br><span class="line">      <span class="attr">initialDelaySeconds:</span> <span class="number">2</span></span><br><span class="line">      <span class="attr">periodSeconds:</span> <span class="number">2</span></span><br><span class="line">      <span class="attr">successThreshold:</span> <span class="number">1</span></span><br><span class="line">      <span class="attr">timeoutSeconds:</span> <span class="number">1</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">go-fn</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">8080</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">http</span></span><br><span class="line">      <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">    <span class="attr">readinessProbe:</span></span><br><span class="line">      <span class="attr">failureThreshold:</span> <span class="number">3</span></span><br><span class="line">      <span class="attr">httpGet:</span></span><br><span class="line">        <span class="attr">path:</span> <span class="string">/_/health</span></span><br><span class="line">        <span class="attr">port:</span> <span class="number">8080</span></span><br><span class="line">        <span class="attr">scheme:</span> <span class="string">HTTP</span></span><br><span class="line">      <span class="attr">initialDelaySeconds:</span> <span class="number">2</span></span><br><span class="line">      <span class="attr">periodSeconds:</span> <span class="number">2</span></span><br><span class="line">      <span class="attr">successThreshold:</span> <span class="number">1</span></span><br><span class="line">      <span class="attr">timeoutSeconds:</span> <span class="number">1</span></span><br><span class="line">    <span class="attr">resources:</span> &#123;&#125;</span><br><span class="line">    <span class="attr">securityContext:</span></span><br><span class="line">      <span class="attr">readOnlyRootFilesystem:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">terminationMessagePath:</span> <span class="string">/dev/termination-log</span></span><br><span class="line">    <span class="attr">terminationMessagePolicy:</span> <span class="string">File</span></span><br><span class="line">    <span class="attr">volumeMounts:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">mountPath:</span> <span class="string">/var/run/secrets/kubernetes.io/serviceaccount</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">kube-api-access-b7kx5</span></span><br><span class="line">      <span class="attr">readOnly:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">dnsPolicy:</span> <span class="string">ClusterFirst</span></span><br><span class="line">  <span class="attr">enableServiceLinks:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">nodeName:</span> <span class="string">wnx</span></span><br><span class="line">  <span class="attr">preemptionPolicy:</span> <span class="string">PreemptLowerPriority</span></span><br><span class="line">  <span class="attr">priority:</span> <span class="number">0</span></span><br><span class="line">  <span class="attr">restartPolicy:</span> <span class="string">Always</span></span><br><span class="line">  <span class="attr">schedulerName:</span> <span class="string">default-scheduler</span></span><br><span class="line">  <span class="attr">securityContext:</span> &#123;&#125;</span><br><span class="line">  <span class="attr">serviceAccount:</span> <span class="string">default</span></span><br><span class="line">  <span class="attr">serviceAccountName:</span> <span class="string">default</span></span><br><span class="line">  <span class="attr">terminationGracePeriodSeconds:</span> <span class="number">30</span></span><br><span class="line">  <span class="attr">tolerations:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">effect:</span> <span class="string">NoExecute</span></span><br><span class="line">    <span class="attr">key:</span> <span class="string">node.kubernetes.io/not-ready</span></span><br><span class="line">    <span class="attr">operator:</span> <span class="string">Exists</span></span><br><span class="line">    <span class="attr">tolerationSeconds:</span> <span class="number">300</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">effect:</span> <span class="string">NoExecute</span></span><br><span class="line">    <span class="attr">key:</span> <span class="string">node.kubernetes.io/unreachable</span></span><br><span class="line">    <span class="attr">operator:</span> <span class="string">Exists</span></span><br><span class="line">    <span class="attr">tolerationSeconds:</span> <span class="number">300</span></span><br><span class="line">  <span class="attr">volumes:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">kube-api-access-b7kx5</span></span><br><span class="line">    <span class="attr">projected:</span></span><br><span class="line">      <span class="attr">defaultMode:</span> <span class="number">420</span></span><br><span class="line">      <span class="attr">sources:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">serviceAccountToken:</span></span><br><span class="line">          <span class="attr">expirationSeconds:</span> <span class="number">3607</span></span><br><span class="line">          <span class="attr">path:</span> <span class="string">token</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">configMap:</span></span><br><span class="line">          <span class="attr">items:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">key:</span> <span class="string">ca.crt</span></span><br><span class="line">            <span class="attr">path:</span> <span class="string">ca.crt</span></span><br><span class="line">          <span class="attr">name:</span> <span class="string">kube-root-ca.crt</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">downwardAPI:</span></span><br><span class="line">          <span class="attr">items:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">fieldRef:</span></span><br><span class="line">              <span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line">              <span class="attr">fieldPath:</span> <span class="string">metadata.namespace</span></span><br><span class="line">            <span class="attr">path:</span> <span class="string">namespace</span></span><br></pre></td></tr></table></figure>

<p>å·²å‘å¸ƒçš„å‡½æ•°ä¸­ï¼ŒInvocations ä¸ºè°ƒç”¨æ¬¡æ•°ï¼ŒReplicas ä¸ºå½“å‰å‡½æ•°åº”ç”¨çš„å‰¯æœ¬ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">faas-cli list</span></span><br><span class="line">Function    	Invocations    	Replicas</span><br><span class="line">go-fn    	    0              	1   </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">faas describe go-fn</span></span><br><span class="line">Name:               go-fn</span><br><span class="line">Status:             Not Ready</span><br><span class="line">Replicas:           1</span><br><span class="line">Available Replicas: 0</span><br><span class="line">Invocations:        17542</span><br><span class="line">Image:              harbor.archeros.cn/dev/ake/openfaas-fn:dev</span><br><span class="line">Function Process:   ./handler</span><br><span class="line">URL:                http://127.0.0.1:8080/function/go-fn</span><br><span class="line">Async URL:          http://127.0.0.1:8080/async-function/go-fn</span><br><span class="line">Labels:</span><br><span class="line"> faas_function: go-fn</span><br><span class="line">Annotations:</span><br><span class="line"> prometheus.io.scrape: false</span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå¯ä»¥é€šè¿‡éƒ¨ç½²æ—¶æŒ‡å®š â€“label é™åˆ¶æ‰©å®¹è§„æ ¼ç­‰ä¿¡æ¯ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">faas-cli deploy -f go-fn.yml --label com.openfaas.scale.max=2</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ­¤æ—¶æ— è®ºå¤šå¤§çš„è¯·æ±‚é‡ï¼Œæœ€å¤§</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">faas-cli describe go-fn</span></span><br><span class="line">Name:               go-fn</span><br><span class="line">Status:             Ready</span><br><span class="line">Replicas:           2</span><br><span class="line">Available Replicas: 2</span><br><span class="line">Invocations:        21517</span><br><span class="line">Image:              harbor.archeros.cn/dev/ake/openfaas-fn:dev</span><br><span class="line">Function Process:   ./handler</span><br><span class="line">URL:                http://127.0.0.1:8080/function/go-fn</span><br><span class="line">Async URL:          http://127.0.0.1:8080/async-function/go-fn</span><br><span class="line">Labels:</span><br><span class="line"> com.openfaas.scale.max: 2</span><br><span class="line"> faas_function: go-fn</span><br><span class="line">Annotations:</span><br><span class="line"> prometheus.io.scrape: false</span><br></pre></td></tr></table></figure>



<p>é™¤äº† faas-cliï¼Œå‡½æ•°çš„åˆ›å»ºã€æ„å»ºä¸å‘å¸ƒä¹Ÿå¯ä»¥é€šè¿‡ OpenFaaS UI æ“ä½œï¼š</p>
<div align=center><img width="800" style="border: 0px" src="/gallery/openfaas/deploy.png"></div>

<h3 id="è°ƒç”¨å‡½æ•°"><a href="#è°ƒç”¨å‡½æ•°" class="headerlink" title="è°ƒç”¨å‡½æ•°"></a>è°ƒç”¨å‡½æ•°</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">faas-cli invoke go-fn</span></span><br><span class="line">Reading from STDIN - hit (Control + D) to stop.</span><br><span class="line">Hello World</span><br><span class="line">Body: Hello World</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç­‰ä»·äº</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> Hello World | faas-cli invoke go-fn</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">faas-cli invoke go-fn --from-literal=<span class="string">&quot;Hello World&quot;</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">faas-cli invoke go-fn --from-file=~/Downloads/derek.pem</span></span><br></pre></td></tr></table></figure>

<p>UI è°ƒç”¨æ–¹å¼ä¸ºï¼š</p>
<div align=center><img width="800" style="border: 0px" src="/gallery/openfaas/invoke.png"></div>

<p>æ­¤å¤–ï¼Œæ ¹æ®å‡½æ•°è°ƒç”¨çš„è·¯ç”±ï¼Œä¹Ÿåˆ†ä¸ºåŒæ­¥è°ƒç”¨ä¸å¼‚æ­¥è°ƒç”¨ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åŒæ­¥è°ƒç”¨ <span class="keyword">function</span> è·¯ç”±</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">curl -i -d <span class="string">&quot;Hello World&quot;</span> http://127.0.0.1:8080/function/go-fn</span></span><br><span class="line">Handling connection for 8080</span><br><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Content-Length: 17</span><br><span class="line">Content-Type: text/plain; charset=utf-8</span><br><span class="line">Date: Fri, 09 Jun 2023 03:43:13 GMT</span><br><span class="line">X-Call-Id: 98630f05-1b39-4fc5-bb89-7c2c66c1cf7f</span><br><span class="line">X-Duration-Seconds: 0.002147</span><br><span class="line">X-Start-Time: 1686282193791968394</span><br><span class="line"></span><br><span class="line">Body: Hello World</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¼‚æ­¥è°ƒç”¨ async-function è·¯ç”±</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">curl -i -d <span class="string">&quot;Hello World&quot;</span> http://127.0.0.1:8080/async-function/go-fn</span></span><br><span class="line">Handling connection for 8080</span><br><span class="line">HTTP/1.1 202 Accepted</span><br><span class="line">X-Call-Id: fea5f39d-e7ad-4454-8283-1a213710f3a7</span><br><span class="line">X-Start-Time: 1686282228379248896</span><br><span class="line">Date: Fri, 09 Jun 2023 03:43:48 GMT</span><br><span class="line">Content-Length: 0</span><br></pre></td></tr></table></figure>

<h3 id="è‡ªåŠ¨æ‰©ç¼©å®¹"><a href="#è‡ªåŠ¨æ‰©ç¼©å®¹" class="headerlink" title="è‡ªåŠ¨æ‰©ç¼©å®¹"></a>è‡ªåŠ¨æ‰©ç¼©å®¹</h3><p>æ¨¡æ‹Ÿæµ·é‡è¯·æ±‚ï¼Œè§‚å¯Ÿ OpenFaaS å‡½æ•°åº”ç”¨çš„	è‡ªåŠ¨æ‰©å®¹ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="keyword">while</span> <span class="literal">true</span> ;<span class="keyword">do</span> <span class="built_in">echo</span> Hello World | faas-cli invoke go-fn; <span class="keyword">done</span></span></span><br></pre></td></tr></table></figure>

<p>éšç€è¯·æ±‚è°ƒç”¨é‡çš„å¢åŠ ï¼Œå‰¯æœ¬æ•°ä¹Ÿé€æ¸å¢åŠ ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">kubectl get deploy -n openfaas-fn   go-fn -w</span></span><br><span class="line">NAME    READY   UP-TO-DATE   AVAILABLE   AGE</span><br><span class="line">go-fn   1/1     1            1           7m57s</span><br><span class="line">go-fn   1/2     2            1           8m35s</span><br><span class="line">go-fn   2/2     2            2           8m38s</span><br><span class="line">go-fn   2/3     3            2           9m15s</span><br><span class="line">go-fn   3/3     3            3           9m18s</span><br><span class="line">go-fn   3/4     3            3           9m55s</span><br><span class="line">go-fn   4/4     4            4           9m59s</span><br><span class="line">go-fn   4/5     4            4           10m</span><br><span class="line">go-fn   5/5     5            5           10m</span><br></pre></td></tr></table></figure>

<p>å½“åœæ­¢æ¨¡æ‹Ÿè¯·æ±‚æ—¶ï¼Œå‰¯æœ¬æ•°ä¹Ÿé€æ¸å‡å°‘ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">kubectl get deploy -n openfaas-fn   go-fn -w</span></span><br><span class="line">NAME    READY   UP-TO-DATE   AVAILABLE   AGE</span><br><span class="line">go-fn   5/5     5            5           11m</span><br><span class="line">go-fn   5/1     5            5           11m</span><br><span class="line">go-fn   1/1     1            1           11m</span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå¯ä»¥é€šè¿‡éƒ¨ç½²æ—¶æŒ‡å®š â€“label é™åˆ¶æ‰©å®¹è§„æ ¼ç­‰ä¿¡æ¯ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">faas-cli deploy -f go-fn.yml --label com.openfaas.scale.max=2</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">faas-cli describe go-fn</span></span><br><span class="line">Name:               go-fn</span><br><span class="line">Status:             Ready</span><br><span class="line">Replicas:           2</span><br><span class="line">Available Replicas: 2</span><br><span class="line">Invocations:        21517</span><br><span class="line">Image:              harbor.archeros.cn/dev/ake/openfaas-fn:dev</span><br><span class="line">Function Process:   ./handler</span><br><span class="line">URL:                http://127.0.0.1:8080/function/go-fn</span><br><span class="line">Async URL:          http://127.0.0.1:8080/async-function/go-fn</span><br><span class="line">Labels:</span><br><span class="line"> com.openfaas.scale.max: 2</span><br><span class="line"> faas_function: go-fn</span><br><span class="line">Annotations:</span><br><span class="line"> prometheus.io.scrape: false</span><br></pre></td></tr></table></figure>

<h3 id="å‡½æ•°æ—¥å¿—"><a href="#å‡½æ•°æ—¥å¿—" class="headerlink" title="å‡½æ•°æ—¥å¿—"></a>å‡½æ•°æ—¥å¿—</h3><p>é’ˆå¯¹ Kubernetes çš„æ—¥å¿— provider ä¸º faas-netes ç»„ä»¶ï¼Œå…¶è·å–æ—¥å¿—çš„æ–¹å¼ç­‰ä»·äº <code>kubectl logs -n openfaas-fn deploy/function</code>ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">faas-cli logs go-fn</span></span><br><span class="line">2023-06-07T16:15:23+08:00 2023/06/07 08:15:23 POST / - 200 OK - ContentLength: 18B (0.0008s)</span><br><span class="line">2023-06-07T16:15:23+08:00 2023/06/07 08:15:23 POST / - 200 OK - ContentLength: 18B (0.0005s)</span><br><span class="line">2023-06-07T16:15:24+08:00 2023/06/07 08:15:24 POST / - 200 OK - ContentLength: 18B (0.0015s)</span><br><span class="line">2023-06-07T16:15:24+08:00 2023/06/07 08:15:24 POST / - 200 OK - ContentLength: 18B (0.0007s)</span><br><span class="line">2023-06-07T16:15:24+08:00 2023/06/07 08:15:24 POST / - 200 OK - ContentLength: 18B (0.0017s)</span><br></pre></td></tr></table></figure>

<h3 id="ç§»é™¤å‡½æ•°"><a href="#ç§»é™¤å‡½æ•°" class="headerlink" title="ç§»é™¤å‡½æ•°"></a>ç§»é™¤å‡½æ•°</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">faas-cli remove go-fn</span></span><br><span class="line">Deleting: go-fn.</span><br><span class="line">Handling connection for 8080</span><br><span class="line">Removing old function.</span><br></pre></td></tr></table></figure>

<h2 id="Secret-ç®¡ç†"><a href="#Secret-ç®¡ç†" class="headerlink" title="Secret ç®¡ç†"></a>Secret ç®¡ç†</h2><p>ä¹‹æ‰€ä»¥äºŒæ¬¡å°è£… APIï¼Œæ˜¯ä¸ºäº†ä¾¿äºç®¡ç†å‡½æ•°æ‰€ç”¨åˆ°çš„ Secretã€‚</p>
<p>é»˜è®¤æ“ä½œçš„ Secret ä½äº openfaas-fn å‘½åç©ºé—´ä¸‹ï¼Œå¯ä»¥é€šè¿‡ â€“namespace æŒ‡å®šï¼›é»˜è®¤æ“ä½œçš„ OpenFaaS å®ä¾‹ä¸º </p>
<p><strong>create</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">faas-cli secret create my-secret</span></span><br><span class="line">Reading from STDIN - hit (Control + D) to stop.</span><br><span class="line">my-password</span><br><span class="line">Creating secret: my-secret.</span><br><span class="line">Handling connection for 8080</span><br><span class="line">Created: 202 Accepted</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç­‰ä»·äº</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> my-password | faas-cli secret create my-secret</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">faas-cli secret create my-secret --from-literal=<span class="string">&quot;my-password&quot;</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">faas-cli secret create my-secret --from-file=~/Downloads/derek.pem</span></span><br></pre></td></tr></table></figure>

<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">data:</span></span><br><span class="line">  <span class="attr">my-secret:</span> <span class="string">bXktcGFzc3dvcmQ=</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Secret</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">creationTimestamp:</span> <span class="string">&quot;2023-06-07T06:19:14Z&quot;</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/managed-by:</span> <span class="string">openfaas</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">my-secret</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">openfaas-fn</span></span><br><span class="line">  <span class="attr">resourceVersion:</span> <span class="string">&quot;11584461&quot;</span></span><br><span class="line">  <span class="attr">uid:</span> <span class="string">dd0803f2-76d8-453a-a770-ec2633cd6b22</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">Opaque</span></span><br></pre></td></tr></table></figure>

<p><strong>update</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">faas-cli secret update my-secret</span></span><br><span class="line">Reading from STDIN - hit (Control + D) to stop.</span><br><span class="line">my-new-pasword</span><br><span class="line">Updating secret: my-secret</span><br><span class="line">Handling connection for 8080</span><br><span class="line">Updated: 202 Accepted</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç­‰ä»·äº</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> my-new-secret | faas-cli secret update my-secret</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">faas-cli secret update my-secret --from-literal=<span class="string">&quot;my-password&quot;</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">faas-cli secret update my-secret --from-file=~/Downloads/derek.pem</span></span><br></pre></td></tr></table></figure>

<p><strong>list</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">faas-cli secret list</span></span><br><span class="line">Handling connection for 8080</span><br><span class="line"></span><br><span class="line">NAME</span><br><span class="line">my-secret</span><br></pre></td></tr></table></figure>

<p><strong>delete</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">faas-cli secret remove my-secret</span></span><br><span class="line">faas-cli secret remove my-secret</span><br><span class="line">Handling connection for 8080</span><br><span class="line">Removed.. OK.</span><br></pre></td></tr></table></figure>

<h1 id="OpenFaaS-Pro"><a href="#OpenFaaS-Pro" class="headerlink" title="OpenFaaS Pro"></a>OpenFaaS Pro</h1><p><em>OpenFaaS Pro æ˜¯ OpenFaaS çš„å•†ä¸šè®¸å¯å‘è¡Œç‰ˆï¼Œå…·æœ‰é™„åŠ åŠŸèƒ½ã€é…ç½®å’Œå•†ä¸šæ”¯æŒã€‚</em></p>
<h2 id="å®‰è£…-1"><a href="#å®‰è£…-1" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><h3 id="faas-cli-pro"><a href="#faas-cli-pro" class="headerlink" title="faas-cli pro"></a>faas-cli pro</h3><p>faas-cli å¯¹äº OpenFaaS Pro çš„æ”¯æŒæ˜¯é€šè¿‡æ’ä»¶çš„æ–¹å¼ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">faas-cli plugin get pro</span></span><br><span class="line">Fetching plugin: pro</span><br><span class="line">Downloaded in (4s)</span><br><span class="line"></span><br><span class="line">Usage:</span><br><span class="line">  faas-cli pro</span><br></pre></td></tr></table></figure>

<p>æ ¹æ® github è´¦å·æ ¡éªŒ OpenFaaS Pro è´­ä¹°è®¤è¯ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">faas-cli pro <span class="built_in">enable</span></span></span><br><span class="line">Please visit: https://github.com/login/device</span><br><span class="line">and enter the code: 168C-29B2</span><br><span class="line">Waiting for authorization...</span><br><span class="line">Waiting for authorization...</span><br><span class="line">Waiting for authorization...</span><br><span class="line">Waiting for authorization...</span><br><span class="line">GET https://api.github.com/user/memberships/orgs: 401 Bad credentials []</span><br></pre></td></tr></table></figure>

<h2 id="å¯¹æ¯”"><a href="#å¯¹æ¯”" class="headerlink" title="å¯¹æ¯”"></a>å¯¹æ¯”</h2><h3 id="Support"><a href="#Support" class="headerlink" title="Support"></a>Support</h3><table>
<thead>
<tr>
<th align="left">Description</th>
<th align="left">OpenFaaS CE</th>
<th align="left">OpenFaaS Pro</th>
<th align="left">OpenFaaS for Enterprise</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Suitability</td>
<td align="left">Open Source developers and initial exploration</td>
<td align="left">Production, business critical, or PoC</td>
<td align="left">Regulated companies which may have additional legal and compliance requirements</td>
</tr>
<tr>
<td align="left">SLA</td>
<td align="left">N&#x2F;a</td>
<td align="left">N&#x2F;a</td>
<td align="left">Response within 1 business day for P1</td>
</tr>
<tr>
<td align="left">Buying process</td>
<td align="left">N&#x2F;a</td>
<td align="left">Invoice paid by bank transfer</td>
<td align="left">Supplier portals, custom paperwork, negotiation with procurement.</td>
</tr>
<tr>
<td align="left">Legal review of contract</td>
<td align="left">N&#x2F;a</td>
<td align="left">N&#x2F;a</td>
<td align="left">Yes</td>
</tr>
<tr>
<td align="left">Signing of Mutual NDA</td>
<td align="left">N&#x2F;a</td>
<td align="left">N&#x2F;a</td>
<td align="left">Subject to agreement</td>
</tr>
<tr>
<td align="left">Additional compliance needs</td>
<td align="left">N&#x2F;a</td>
<td align="left">N&#x2F;a</td>
<td align="left">Subject to agreement</td>
</tr>
<tr>
<td align="left">Support via email</td>
<td align="left">N&#x2F;a</td>
<td align="left">Pro features only</td>
<td align="left">All certified Open Source and commercial components</td>
</tr>
<tr>
<td align="left">Support via GitHub</td>
<td align="left">N&#x2F;a</td>
<td align="left">Pro features only using the Customer Community</td>
<td align="left">N&#x2F;a</td>
</tr>
<tr>
<td align="left">Support via Slack</td>
<td align="left">N&#x2F;a</td>
<td align="left">N&#x2F;a</td>
<td align="left">Up to 5 developers</td>
</tr>
<tr>
<td align="left">License</td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/openfaas/faas/blob/master/LICENSE">MIT</a></td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/openfaas/faas/blob/master/pro/EULA">Commercial license EULA</a></td>
<td align="left">As per Pro</td>
</tr>
<tr>
<td align="left">Architecture review</td>
<td align="left">N&#x2F;a</td>
<td align="left">N&#x2F;a</td>
<td align="left">With our team via Zoom</td>
</tr>
<tr>
<td align="left">Onboarding call</td>
<td align="left">N&#x2F;a</td>
<td align="left">N&#x2F;a</td>
<td align="left">With our team via Zoom</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/openfaas/customers">Customer Community</a></td>
<td align="left">N&#x2F;a</td>
<td align="left">Private access to <a target="_blank" rel="noopener" href="https://github.com/openfaas/customers">Customer Community</a> - one user per licensed cluster</td>
<td align="left">Custom amount of users</td>
</tr>
</tbody></table>
<h3 id="Autoscaling"><a href="#Autoscaling" class="headerlink" title="Autoscaling"></a>Autoscaling</h3><table>
<thead>
<tr>
<th align="left">Description</th>
<th align="left">OpenFaaS CE</th>
<th align="left">OpenFaaS Pro</th>
<th align="left">OpenFaaS for Enterprise</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Scale to Zero</td>
<td align="left">Not supported</td>
<td align="left"><a target="_blank" rel="noopener" href="https://docs.openfaas.com/openfaas-pro/scale-to-zero">Global default, or custom time per function</a></td>
<td align="left">As per Pro</td>
</tr>
<tr>
<td align="left">Maximum replicas per function</td>
<td align="left">5 Pods</td>
<td align="left">No limit applied</td>
<td align="left">As per Pro</td>
</tr>
<tr>
<td align="left">Scale to From</td>
<td align="left">Not supported</td>
<td align="left">Supported, with additional checks for Istio</td>
<td align="left">As per Pro</td>
</tr>
<tr>
<td align="left">Autoscaling strategy</td>
<td align="left">RPS-only</td>
<td align="left"><a target="_blank" rel="noopener" href="https://docs.openfaas.com/architecture/autoscaling">CPU utilization, Capacity (inflight requests) or RPS</a></td>
<td align="left">As per Pro</td>
</tr>
<tr>
<td align="left">Autoscaling granularity</td>
<td align="left">Single rule for all functions</td>
<td align="left">Configurable per function</td>
<td align="left">As per Pro</td>
</tr>
</tbody></table>
<h3 id="Core-Features"><a href="#Core-Features" class="headerlink" title="Core Features"></a>Core Features</h3><table>
<thead>
<tr>
<th align="left">Description</th>
<th align="left">OpenFaaS CE</th>
<th align="left">OpenFaaS Pro</th>
<th align="left">OpenFaaS for Enterprise</th>
</tr>
</thead>
<tbody><tr>
<td align="left">UI Dashboard</td>
<td align="left">Legacy UI (in code-freeze)</td>
<td align="left"><a target="_blank" rel="noopener" href="https://docs.openfaas.com/openfaas-pro/dashboard">New UI dashboard</a> with metrics, logs &amp; CI integration</td>
<td align="left">As per Pro, but with support for multiple namespaces</td>
</tr>
<tr>
<td align="left">Consume secrets in <code>faas-cli build</code> for npm, Go and Pypy</td>
<td align="left">Not available</td>
<td align="left">Via build-time secrets</td>
<td align="left">As Per Pro</td>
</tr>
<tr>
<td align="left">Kubernetes service accounts for functions</td>
<td align="left">N&#x2F;a</td>
<td align="left"><a target="_blank" rel="noopener" href="https://docs.openfaas.com/reference/workloads">Supported per function</a></td>
<td align="left">As per Pro</td>
</tr>
<tr>
<td align="left">Async &#x2F; queueing</td>
<td align="left">In-memory only, max 10 items in queue, 256KB message size</td>
<td align="left">JetStream with shared queue</td>
<td align="left">JetStream with dedicated queues</td>
</tr>
<tr>
<td align="left">Metrics</td>
<td align="left">Basic function metrics</td>
<td align="left">Function, HTTP, CPU&#x2F;RAM usage, and async&#x2F;queue metrics</td>
<td align="left">As per Pro</td>
</tr>
<tr>
<td align="left">CPU &amp; RAM utilization</td>
<td align="left">Not available</td>
<td align="left">Integrated with Prometheus metrics, OpenFaaS REST API &amp; CLI</td>
<td align="left">As per Pro</td>
</tr>
<tr>
<td align="left">Grafana Dashboards</td>
<td align="left">N&#x2F;a</td>
<td align="left">4x dashboards supplied in <a target="_blank" rel="noopener" href="https://github.com/openfaas/customers">Customer Community</a> - overview, spotlight for debugging a function, queue-worker and Function Builder API</td>
<td align="left">As per Pro</td>
</tr>
<tr>
<td align="left">GitOps &amp; CRD support</td>
<td align="left">Not available</td>
<td align="left">ArgoCD, FluxCD and Helm compatibility using the Function CRD</td>
<td align="left">As per Pro</td>
</tr>
<tr>
<td align="left">Deployment options</td>
<td align="left">faas-cli or REST API</td>
<td align="left">As per CE, plus: Function CRD with kubectl, Helm or GitOps</td>
<td align="left">As per Pro</td>
</tr>
<tr>
<td align="left">Custom Resource Definition</td>
<td align="left">Not available</td>
<td align="left">Function and Profile</td>
<td align="left"></td>
</tr>
</tbody></table>
<h3 id="Event-Connectors"><a href="#Event-Connectors" class="headerlink" title="Event Connectors"></a>Event Connectors</h3><table>
<thead>
<tr>
<th align="left">Description</th>
<th align="left">OpenFaaS CE</th>
<th align="left">OpenFaaS Pro</th>
<th align="left">OpenFaaS for Enterprise</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Number of topics per function</td>
<td align="left">One topic per function</td>
<td align="left">Multiple topics per function</td>
<td align="left">As per Pro</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://docs.openfaas.com/openfaas-pro/kafka-events">Kafka event trigger</a></td>
<td align="left">Not supported</td>
<td align="left">Supports SASL or TLS auth, Aiven, Confluent and self-hosted</td>
<td align="left">Support with SLA</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://docs.openfaas.com/openfaas-pro/postgres-events">Postgres trigger</a></td>
<td align="left">Not supported</td>
<td align="left">Supports insert, update and delete, with table-level filters using WAL or LISTEN&#x2F;NOTIFY.</td>
<td align="left">Support with SLA</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://docs.openfaas.com/openfaas-pro/sqs-events">AWS SQS trigger</a></td>
<td align="left">Not supported</td>
<td align="left">Standard support</td>
<td align="left">Support with SLA</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://docs.openfaas.com/reference/cron">Cron and scheduled invocations</a></td>
<td align="left">Community support</td>
<td align="left">Standard support</td>
<td align="left">Support with SLA</td>
</tr>
</tbody></table>
<h3 id="Durability-and-Reliability"><a href="#Durability-and-Reliability" class="headerlink" title="Durability and Reliability"></a>Durability and Reliability</h3><table>
<thead>
<tr>
<th align="left">Description</th>
<th align="left">OpenFaaS CE</th>
<th align="left">OpenFaaS Pro</th>
<th align="left">OpenFaaS for Enterprise</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Readiness probes</td>
<td align="left">Not supported</td>
<td align="left"><a target="_blank" rel="noopener" href="https://docs.openfaas.com/reference/workloads">Readiness probes</a> supported with custom HTTP path and intervals per function</td>
<td align="left">As per Pro</td>
</tr>
<tr>
<td align="left">Retries for failed function invocations</td>
<td align="left">Not supported</td>
<td align="left"><a target="_blank" rel="noopener" href="https://docs.openfaas.com/openfaas-pro/retries">Retry invocations</a> for configured HTTP codes with an exponential back-off</td>
<td align="left">As per Pro</td>
</tr>
<tr>
<td align="left">Highly Available messaging</td>
<td align="left">Not available, in-memory only</td>
<td align="left">Available for NATS JetStream, with 3x servers.</td>
<td align="left">As per Pro</td>
</tr>
<tr>
<td align="left">Long executions of async functions</td>
<td align="left">Limited to 5 minutes</td>
<td align="left">Configurable duration</td>
<td align="left">As per Pro</td>
</tr>
<tr>
<td align="left">Callback to custom URL for async functions</td>
<td align="left">Supported</td>
<td align="left">As per CE</td>
<td align="left">As per CE</td>
</tr>
</tbody></table>
<h3 id="Security"><a href="#Security" class="headerlink" title="Security"></a>Security</h3><table>
<thead>
<tr>
<th align="left">Description</th>
<th align="left">OpenFaaS CE</th>
<th align="left">OpenFaaS Pro</th>
<th align="left">OpenFaaS for Enterprise</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Authentication for OpenFaaS API, CLI and UI</td>
<td align="left">Shared admin password between everyone who uses OpenFaaS</td>
<td align="left">N&#x2F;a</td>
<td align="left"><a target="_blank" rel="noopener" href="https://docs.openfaas.com/openfaas-pro/sso">Single Sign-On with OIDC</a></td>
</tr>
<tr>
<td align="left">Compatibility with Istio for mTLS</td>
<td align="left">N&#x2F;a</td>
<td align="left">Supported</td>
<td align="left">As per Pro</td>
</tr>
<tr>
<td align="left">PCI&#x2F;GDPR compliance</td>
<td align="left">Sensitive information such as the request body&#x2F;response body, headers may be printed into the logs for each asynchronous invocation</td>
<td align="left">Sensitive information is not printed to the logs for asynchronous requests</td>
<td align="left">As per Pro</td>
</tr>
<tr>
<td align="left">Secure isolation with Kata containers or gVisor</td>
<td align="left">N&#x2F;a</td>
<td align="left">N&#x2F;a</td>
<td align="left">Supported using an <a target="_blank" rel="noopener" href="https://docs.openfaas.com/reference/profiles">OpenFaaS Pro Profile and runtimeClass</a></td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://kubernetes.io/docs/concepts/services-networking/connect-applications-service/#accessing-the-service">Service links</a> injected as environment variables</td>
<td align="left">Yes, cannot be disabled</td>
<td align="left">Disabled as a default</td>
<td align="left">As per Pro</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://kubernetes.io/docs/concepts/security/pod-security-standards/#restricted">Pod privilege escalation</a></td>
<td align="left">Default for Kubernetes</td>
<td align="left">Explicitly disabled</td>
<td align="left">As per Pro</td>
</tr>
<tr>
<td align="left">Split installation without ClusterAdmin role</td>
<td align="left">N&#x2F;a</td>
<td align="left">Provided in <a target="_blank" rel="noopener" href="https://github.com/openfaas/customers">Customer Community</a></td>
<td align="left">As per Pro</td>
</tr>
</tbody></table>
<h3 id="Platform-Features"><a href="#Platform-Features" class="headerlink" title="Platform Features"></a>Platform Features</h3><table>
<thead>
<tr>
<th align="left">Description</th>
<th align="left">OpenFaaS CE</th>
<th align="left">OpenFaaS Pro</th>
<th align="left">OpenFaaS for Enterprise</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Deploy functions via REST API</td>
<td align="left">Yes</td>
<td align="left">As per CE</td>
<td align="left">As per CE</td>
</tr>
<tr>
<td align="left">Build containers and functions via REST API</td>
<td align="left">N&#x2F;a</td>
<td align="left">N&#x2F;a</td>
<td align="left"><a target="_blank" rel="noopener" href="https://docs.openfaas.com/openfaas-pro/builder">Yes via Function Builder API</a></td>
</tr>
<tr>
<td align="left">Multiple namespace support</td>
<td align="left">No support</td>
<td align="left">N&#x2F;a</td>
<td align="left">Supported with Kubernetes namespaces</td>
</tr>
</tbody></table>
<h1 id="faasd"><a href="#faasd" class="headerlink" title="faasd"></a>faasd</h1><blockquote>
<p>based on <strong>0.16.9</strong></p>
</blockquote>
<p>faasd æ˜¯ OpenFaaS çš„é‡æ–°æ„æƒ³ï¼Œä½†æ²¡æœ‰ Kubernetes çš„æˆæœ¬å’Œå¤æ‚æ€§ã€‚å…¶æœ¬è´¨å°±æ˜¯ä¸€ä¸ª Golang äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå®ƒå¯ä»¥åœ¨è¦æ±‚éå¸¸ä½çš„å•ä¸ªä¸»æœºä¸Šè¿è¡Œï¼Œä½¿å…¶å¿«é€Ÿä¸”æ˜“äºç®¡ç†ã€‚åœ¨åº•å±‚ï¼Œå®ƒä½¿ç”¨ Containerd å’Œ CNI ä»¥åŠæ¥è‡ªä¸»é¡¹ç›®çš„ç›¸åŒæ ¸å¿ƒ OpenFaaS ç»„ä»¶ï¼Œå› æ­¤åœ¨ä½¿ç”¨å±‚é¢å¯ä»¥å®Œå…¨å‚è€ƒ OpenFaaS CE çš„æ“ä½œã€‚</p>
<h2 id="å®‰è£…-2"><a href="#å®‰è£…-2" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">wget https://github.com/openfaas/faasd/releases/download/0.16.9/faasd</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">chmod</span> +x faasd &amp;&amp; <span class="built_in">mv</span> faasd /usr/local/bin</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">basic-auth-user å’Œ secrets/basic-auth-password ä¸ºç½‘å…³è®¤è¯çš„ç”¨æˆ·åå’Œå¯†ç </span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">faasd install</span></span><br><span class="line">2023/06/08 17:53:15 Writing to: &quot;/var/lib/faasd/secrets/basic-auth-password&quot;</span><br><span class="line">2023/06/08 17:53:15 Writing to: &quot;/var/lib/faasd/secrets/basic-auth-user&quot;</span><br><span class="line">Check status with:</span><br><span class="line">  sudo journalctl -u faasd --lines 100 -f</span><br><span class="line"></span><br><span class="line">Login with:</span><br><span class="line">  sudo cat /var/lib/faasd/secrets/basic-auth-password | faas-cli login -s</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">systemctl status faasd</span></span><br><span class="line">â— faasd.service - faasd</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/faasd.service; enabled; vendor preset: disabled)</span><br><span class="line">   Active: active (running) since Thu 2023-06-08 17:53:17 CST; 4min 26s ago</span><br><span class="line"> Main PID: 43031 (faasd)</span><br><span class="line">    Tasks: 11</span><br><span class="line">   Memory: 30.9M (limit: 500.0M)</span><br><span class="line">   CGroup: /system.slice/faasd.service</span><br><span class="line">           â””â”€43031 /usr/local/bin/faasd up</span><br><span class="line"></span><br><span class="line">Jun 08 17:54:34 wnx faasd[43031]: 2023/06/08 17:54:34 Looking up IP for: &quot;prometheus&quot;</span><br><span class="line">Jun 08 17:54:34 wnx faasd[43031]: 2023/06/08 17:54:34 Resolver: &quot;localhost&quot;=&quot;127.0.0.1&quot;</span><br><span class="line">Jun 08 17:54:34 wnx faasd[43031]: 2023/06/08 17:54:34 Resolver: &quot;faasd-provider&quot;=&quot;10.62.0.1&quot;</span><br><span class="line">Jun 08 17:54:34 wnx faasd[43031]: 2023/06/08 17:54:34 Resolver: &quot;nats&quot;=&quot;10.62.0.2&quot;</span><br><span class="line">Jun 08 17:54:34 wnx faasd[43031]: 2023/06/08 17:54:34 Resolver: &quot;prometheus&quot;=&quot;10.62.0.3&quot;</span><br><span class="line">Jun 08 17:54:34 wnx faasd[43031]: 2023/06/08 17:54:34 Resolver: &quot;gateway&quot;=&quot;10.62.0.4&quot;</span><br><span class="line">Jun 08 17:54:34 wnx faasd[43031]: 2023/06/08 17:54:34 Resolver: &quot;queue-worker&quot;=&quot;10.62.0.5&quot;</span><br><span class="line">Jun 08 17:54:34 wnx faasd[43031]: 2023/06/08 17:54:34 Proxy from: 127.0.0.1:9090, to: prometheus:9090 (10.62.0.3)</span><br><span class="line">Jun 08 17:54:34 wnx faasd[43031]: 2023/06/08 17:54:34 faasd: waiting for SIGTERM or SIGINT</span><br><span class="line">Jun 08 17:54:34 wnx faasd[43031]: 2023/06/08 17:54:34 Proxy from: 0.0.0.0:8080, to: gateway:8080 (10.62.0.4)</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡æœåŠ¡çŠ¶æ€å¯ä»¥çœ‹åˆ°ï¼Œ10.62.0.1 ~ 10.62.0.5 ç”¨äºç›‘å¬ OpenFaaS æ ¸å¿ƒæœåŠ¡ï¼Œä½äº Containerd çš„ openfaas å‘½åç©ºé—´ä¸­ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ctr -n openfaas c <span class="built_in">ls</span></span></span><br><span class="line">CONTAINER       IMAGE                                      RUNTIME                  </span><br><span class="line">gateway         ghcr.io/openfaas/gateway:0.26.3            io.containerd.runc.v2    </span><br><span class="line">nats            docker.io/library/nats-streaming:0.25.3    io.containerd.runc.v2    </span><br><span class="line">prometheus      docker.io/prom/prometheus:v2.42.0          io.containerd.runc.v2    </span><br><span class="line">queue-worker    ghcr.io/openfaas/queue-worker:0.13.3       io.containerd.runc.v2 </span><br></pre></td></tr></table></figure>

<h2 id="ç½‘å…³è®¤è¯-1"><a href="#ç½‘å…³è®¤è¯-1" class="headerlink" title="ç½‘å…³è®¤è¯"></a>ç½‘å…³è®¤è¯</h2><p>å¤–éƒ¨ç½‘å…³ä¸º <code>http://178.104.162.69:8080/ui</code>ï¼Œè®¤è¯ä¿¡æ¯ä½äº &#x2F;var&#x2F;lib&#x2F;faasd&#x2F;secrets&#x2F;basic-auth-user å’Œ &#x2F;var&#x2F;lib&#x2F;faasd&#x2F;secrets&#x2F;basic-auth-passwordã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> /var/lib/faasd/secrets/basic-auth-password | faas-cli login -s</span></span><br><span class="line">Calling the OpenFaaS server to validate the credentials...</span><br><span class="line">credentials saved for admin http://127.0.0.1:8080</span><br></pre></td></tr></table></figure>

<p>å…¶ä½™æ¨¡æ¿å•†åº—å’Œä½¿ç”¨æ–¹å¼ç­‰æ“ä½œå’Œ OpenFaaS CE å®Œå…¨ä¸€è‡´ã€‚å…¶ä¸­ï¼ŒOpenFaaS å‡½æ•°å®¹å™¨æ‰˜ç®¡åœ¨ Containerd çš„ openfaas-fn å‘½åç©ºé—´ä¸­ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ctr -n openfaas-fn c <span class="built_in">ls</span></span></span><br><span class="line">CONTAINER    IMAGE                                         RUNTIME                  </span><br><span class="line">go-fn        harbor.archeros.cn/dev/ake/openfaas-fn:dev    io.containerd.runc.v2</span><br></pre></td></tr></table></figure>

</div><div class="article-licensing box"><div class="licensing-title"><p>ã€Œ OpenFaaS ã€å¿«é€Ÿå¼€å§‹</p><p><a href="http://shenxianghong.github.io/2023/06/05/2023-06-05 OpenFaaS å¿«é€Ÿå¼€å§‹/">http://shenxianghong.github.io/2023/06/05/2023-06-05 OpenFaaS å¿«é€Ÿå¼€å§‹/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>Shen Xianghong</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2023-06-05</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2023-06-12</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><hr style="height:1px;margin:1rem 0"><div class="level is-mobile is-flex"><div class="article-tags is-size-7 is-uppercase"><i class="fas fa-tags has-text-grey"></i>Â <a class="link-muted" rel="tag" href="/tags/OpenFaaS/">OpenFaaS </a></div></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2023/05/19/2023-05-19%20Kata%20Containers%20%E6%BA%90%E7%A0%81%E8%B5%B0%E8%AF%BB%20-%20virtcontainers%20hypervisor/"><span class="level-item">ã€Œ Kata Containers ã€æºç èµ°è¯» â€” virtcontainers/hypervisor</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="https://avatars.githubusercontent.com/u/35031258?v=4" alt="ğŸ¾Corgi"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">ğŸ¾Corgi</p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">51</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">7</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">9</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/shenxianghong" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Youtube" href="https://youtube.com"><i class="fab fa-youtube"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Bilibili" href="https://bilibili.com"><i class="fab fa-bilibili"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Reddit" href="https://reddit.com"><i class="fab fa-reddit"></i></a></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://google.com" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Google</span></span><span class="level-right"><span class="level-item tag">google.com</span></span></a></li><li><a class="level is-mobile" href="https://poe.com" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Poe</span></span><span class="level-right"><span class="level-item tag">poe.com</span></span></a></li></ul></div></div></div><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><li><a class="level is-mobile" href="#OpenFaaS-CE"><span class="level-left"><span class="level-item">1</span><span class="level-item">OpenFaaS CE</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#å®‰è£…"><span class="level-left"><span class="level-item">1.1</span><span class="level-item">å®‰è£…</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#faas-cli"><span class="level-left"><span class="level-item">1.1.1</span><span class="level-item">faas-cli</span></span></a></li><li><a class="level is-mobile" href="#OpenFaaS"><span class="level-left"><span class="level-item">1.1.2</span><span class="level-item">OpenFaaS</span></span></a></li></ul></li><li><a class="level is-mobile" href="#ç½‘å…³è®¤è¯"><span class="level-left"><span class="level-item">1.2</span><span class="level-item">ç½‘å…³è®¤è¯</span></span></a></li><li><a class="level is-mobile" href="#æ¨¡æ¿å•†åº—"><span class="level-left"><span class="level-item">1.3</span><span class="level-item">æ¨¡æ¿å•†åº—</span></span></a></li><li><a class="level is-mobile" href="#Hello-World"><span class="level-left"><span class="level-item">1.4</span><span class="level-item">Hello World</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#åˆ›å»ºå‡½æ•°"><span class="level-left"><span class="level-item">1.4.1</span><span class="level-item">åˆ›å»ºå‡½æ•°</span></span></a></li><li><a class="level is-mobile" href="#æ„å»ºå‡½æ•°é•œåƒ"><span class="level-left"><span class="level-item">1.4.2</span><span class="level-item">æ„å»ºå‡½æ•°é•œåƒ</span></span></a></li><li><a class="level is-mobile" href="#å‘å¸ƒå‡½æ•°"><span class="level-left"><span class="level-item">1.4.3</span><span class="level-item">å‘å¸ƒå‡½æ•°</span></span></a></li><li><a class="level is-mobile" href="#è°ƒç”¨å‡½æ•°"><span class="level-left"><span class="level-item">1.4.4</span><span class="level-item">è°ƒç”¨å‡½æ•°</span></span></a></li><li><a class="level is-mobile" href="#è‡ªåŠ¨æ‰©ç¼©å®¹"><span class="level-left"><span class="level-item">1.4.5</span><span class="level-item">è‡ªåŠ¨æ‰©ç¼©å®¹</span></span></a></li><li><a class="level is-mobile" href="#å‡½æ•°æ—¥å¿—"><span class="level-left"><span class="level-item">1.4.6</span><span class="level-item">å‡½æ•°æ—¥å¿—</span></span></a></li><li><a class="level is-mobile" href="#ç§»é™¤å‡½æ•°"><span class="level-left"><span class="level-item">1.4.7</span><span class="level-item">ç§»é™¤å‡½æ•°</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Secret-ç®¡ç†"><span class="level-left"><span class="level-item">1.5</span><span class="level-item">Secret ç®¡ç†</span></span></a></li></ul></li><li><a class="level is-mobile" href="#OpenFaaS-Pro"><span class="level-left"><span class="level-item">2</span><span class="level-item">OpenFaaS Pro</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#å®‰è£…-1"><span class="level-left"><span class="level-item">2.1</span><span class="level-item">å®‰è£…</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#faas-cli-pro"><span class="level-left"><span class="level-item">2.1.1</span><span class="level-item">faas-cli pro</span></span></a></li></ul></li><li><a class="level is-mobile" href="#å¯¹æ¯”"><span class="level-left"><span class="level-item">2.2</span><span class="level-item">å¯¹æ¯”</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Support"><span class="level-left"><span class="level-item">2.2.1</span><span class="level-item">Support</span></span></a></li><li><a class="level is-mobile" href="#Autoscaling"><span class="level-left"><span class="level-item">2.2.2</span><span class="level-item">Autoscaling</span></span></a></li><li><a class="level is-mobile" href="#Core-Features"><span class="level-left"><span class="level-item">2.2.3</span><span class="level-item">Core Features</span></span></a></li><li><a class="level is-mobile" href="#Event-Connectors"><span class="level-left"><span class="level-item">2.2.4</span><span class="level-item">Event Connectors</span></span></a></li><li><a class="level is-mobile" href="#Durability-and-Reliability"><span class="level-left"><span class="level-item">2.2.5</span><span class="level-item">Durability and Reliability</span></span></a></li><li><a class="level is-mobile" href="#Security"><span class="level-left"><span class="level-item">2.2.6</span><span class="level-item">Security</span></span></a></li><li><a class="level is-mobile" href="#Platform-Features"><span class="level-left"><span class="level-item">2.2.7</span><span class="level-item">Platform Features</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#faasd"><span class="level-left"><span class="level-item">3</span><span class="level-item">faasd</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#å®‰è£…-2"><span class="level-left"><span class="level-item">3.1</span><span class="level-item">å®‰è£…</span></span></a></li><li><a class="level is-mobile" href="#ç½‘å…³è®¤è¯-1"><span class="level-left"><span class="level-item">3.2</span><span class="level-item">ç½‘å…³è®¤è¯</span></span></a></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Container-Runtime/"><span class="level-start"><span class="level-item">Container Runtime</span></span><span class="level-end"><span class="level-item tag">18</span></span></a></li><li><a class="level is-mobile" href="/categories/Disaster-Recovery/"><span class="level-start"><span class="level-item">Disaster Recovery</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/"><span class="level-start"><span class="level-item">Programming</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/categories/Scheduling-Orchestration/"><span class="level-start"><span class="level-item">Scheduling &amp; Orchestration</span></span><span class="level-end"><span class="level-item tag">2</span></span></a><ul><li><a class="level is-mobile" href="/categories/Scheduling-Orchestration/Kubernetes/"><span class="level-start"><span class="level-item">Kubernetes</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Serverless/"><span class="level-start"><span class="level-item">Serverless</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/Service-Mesh/"><span class="level-start"><span class="level-item">Service Mesh</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li></ul></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="ğŸ¾Corgi" height="28"></a><p class="is-size-7"><span>&copy; 2023 Shen Xianghong</span>Â Â Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>Â &amp;Â <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">Visited by <span id="busuanzi_value_site_uv">0</span> users</span></p><p class="is-size-7"><br/>And did you get what you wanted from this life, even so?</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><script src="/js/night.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">Ã—</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>